{"componentChunkName":"component---src-templates-blog-post-js","path":"/zh-hant/the-bug-o-notation/","result":{"data":{"site":{"siteMetadata":{"title":"Overreacted","author":"Dan Abramov"}},"markdownRemark":{"id":"31c0d228-5a6d-52f1-8b97-5facb46d00a4","html":"<p>ç•¶ä½ å¯«å°æ–¼æ•ˆèƒ½æ•æ„Ÿçš„ç¨‹å¼ç¢¼æ™‚ï¼Œéš¨æ™‚å°‡å®ƒçš„æ¼”ç®—æ³•è¤‡é›œåº¦éŠ˜è¨˜åœ¨å¿ƒæ˜¯ä»¶å¥½äº‹ã€‚å®ƒé€šå¸¸è¢«å‘ˆç¾ç‚º <a href=\"https://rob-bell.net/2009/06/a-beginners-guide-to-big-o-notation/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Big-O æ¨™è¨˜</a>ã€‚</p>\n<p>Big-O æ˜¯å€‹æ¸¬é‡ <strong>ä½ çš„ç¨‹å¼ç¢¼åœ¨ä½ çš„è³‡æ–™é‡è®Šå¤§çš„æ™‚å€™æœƒè®Šå¾—å¤šæ…¢</strong> çš„æ¨™æº–ã€‚èˆ‰ä¾‹ä¾†èªªï¼Œå¦‚æœä¸€å€‹æ’åºçš„æ¼”ç®—æ³•æœ‰ O(<i>n<sup>2</sup></i>) çš„è¤‡é›œåº¦ï¼Œæ’åº 50 å€çš„æ±è¥¿å¤§æ¦‚æœƒè®Šæˆ 50<sup>2</sup> = 2,500 å€æ…¢ã€‚Big O ä¸æœƒçµ¦ä½ ç¢ºåˆ‡çš„æ•¸å­—ï¼Œä½†ä»–èƒ½å¤ å¹«åŠ©ä½ äº†è§£æ¼”ç®—æ³•å¦‚ä½•<em>æ“´å±•</em> (scales)ã€‚</p>\n<p>ä¸€äº›ä¾‹å­ï¼šO(<i>n</i>), O(<i>n</i> log <i>n</i>), O(<i>n<sup>2</sup></i>), O(<i>n!</i>)ã€‚</p>\n<p>ç„¶è€Œï¼Œ<strong>æœ¬ç¯‡æ–‡ç« ä¸¦ä¸æ˜¯è¦è¬›é—œæ–¼æ¼”ç®—æ³•æˆ–æ•ˆèƒ½çš„äº‹</strong>ã€‚æœ¬ç¯‡æ–‡ç« è¦è¨è«–çš„æ˜¯ APIs å’Œé™¤éŒ¯ã€‚çœ‹èµ·ä¾†ï¼ŒAPI çš„è¨­è¨ˆæœ‰éå¸¸é¡ä¼¼çš„è€ƒé‡ã€‚</p>\n<hr>\n<p>æˆ‘å€‘å¤§éƒ¨åˆ†çš„æ™‚é–“èŠ±åœ¨å°‹æ‰¾å’Œä¿®ç†æˆ‘å€‘ç¨‹å¼ç¢¼è£¡é¢çš„éŒ¯èª¤ã€‚å¤§å¤šæ•¸çš„é–‹ç™¼è€…æœƒæƒ³è¦å¿«é»æ‰¾å‡ºéŒ¯èª¤çš„åœ°æ–¹ã€‚å„˜ç®¡å®ƒæœ€çµ‚å¯èƒ½æ˜¯ä»¤äººæ»¿æ„çš„çµæœï¼Œä½†æœ¬ä¾†ä½ å¯ä»¥é–‹ç™¼ä½ è—åœ–è£¡çš„æŸå€‹æ±è¥¿ï¼Œå»è®ŠæˆèŠ±ä¸€æ•´å¤©çš„æ™‚é–“å°‹æ‰¾å–®ä¸€ä¸€å€‹éŒ¯èª¤ï¼Œé€™æœƒä»¤ä½ æ„Ÿè¦ºè¶…çˆ›ã€‚</p>\n<p>é™¤éŒ¯çš„ç¶“é©—æœƒå½±éŸ¿æˆ‘å€‘å°æ–¼æŠ½è±¡åŒ–ã€ä½¿ç”¨çš„å¥—ä»¶å’Œå·¥å…·çš„æŠ‰æ“‡ã€‚æŸäº› APIÂ å’Œç¨‹å¼èªè¨€çš„è¨­è¨ˆè®“ä¸€å¤§éƒ¨åˆ†çš„éŒ¯èª¤è®Šå¾—ä¸å¯èƒ½ç™¼ç”Ÿã€‚æœ‰çš„å‰‡é€ æˆäº†ç„¡ç›¡çš„å•é¡Œã€‚<strong>ä½†ä½ è¦æ€éº¼çŸ¥é“èª°å±¬æ–¼å“ªä¸€ç¨®å‘¢ï¼Ÿ</strong></p>\n<p>å¾ˆå¤šç·šä¸Šé—œæ–¼ API çš„è¨è«–ä¸»è¦éƒ½æ˜¯é—œæ³¨æ–¼ç¾æ„Ÿï¼Œä½†é‚£<a href=\"/optimized-for-change/\">ä¸èƒ½å‘ˆç¾å‡ºå¤šå°‘</a>é—œæ–¼é€™å€‹ API å¯¦éš›ä¸Šç”¨èµ·ä¾†çš„æ„Ÿè¦ºå¦‚ä½•ã€‚</p>\n<p><strong>æˆ‘æœ‰ä¸€å€‹å¹«åŠ©æˆ‘è¡¡é‡é€™å€‹æ±è¥¿çš„æ¨™æº–ï¼Œæˆ‘å«ä»– <em>Bug-O</em> ç¬¦è™Ÿï¼š</strong></p>\n<p><font size=\"40\">ğŸ(<i>n</i>)</font></p>\n<p>Big-O è§£é‡‹äº†ä½ çš„ç¨‹å¼ç¢¼åœ¨ä½ è¼¸å…¥çš„è³‡æ–™é‡è®Šå¤§çš„æ™‚å€™æœƒè®Šå¾—å¤šæ…¢ã€‚ <em>Bug-O</em> è§£é‡‹äº†ç•¶ä½ çš„ç¨‹å¼ç¢¼å¢é•·çš„æ™‚å€™æŸå€‹ API æœƒæ‹–æ…¢<em>ä½ </em>å¤šå°‘ã€‚ </p>\n<hr>\n<p>èˆ‰ä¾‹ä¾†èªªï¼Œä»¥ä¸‹çš„ç¨‹å¼ç¢¼éš¨è‘—æ™‚é–“æ€¥åˆ‡çš„åˆ©ç”¨ <code class=\"language-text\">node.appendChild()</code> å’Œ <code class=\"language-text\">node.removeChild()</code> æ‰‹å‹•æ›´æ–° DOM ï¼Œä¸¦ä¸”æ²’æœ‰æ˜ç¢ºçš„çµæ§‹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">trySubmit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ç¬¬ä¸€éƒ¨åˆ†</span>\n  <span class=\"token keyword\">let</span> spinner <span class=\"token operator\">=</span> <span class=\"token function\">createSpinner</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>spinner<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">submitForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  \t<span class=\"token comment\">// ç¬¬äºŒéƒ¨åˆ†</span>\n    formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span>spinner<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> successMessage <span class=\"token operator\">=</span> <span class=\"token function\">createSuccessMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>successMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  \t<span class=\"token comment\">// ç¬¬ä¸‰éƒ¨åˆ†</span>\n    formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span>spinner<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> errorMessage <span class=\"token operator\">=</span> <span class=\"token function\">createErrorMessage</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> retryButton <span class=\"token operator\">=</span> <span class=\"token function\">createRetryButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>errorMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>retryButton<span class=\"token punctuation\">)</span>\n    retryButton<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// ç¬¬å››éƒ¨åˆ†</span>\n      formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span>errorMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span>retryButton<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">trySubmit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>é€™æ®µç¨‹å¼ç¢¼çš„å•é¡Œä¸åœ¨å®ƒæœ‰å¤šã€Œé†œã€ã€‚æˆ‘å€‘ä¸æ˜¯åœ¨è¨è«–ç¾æ„Ÿã€‚ <strong>å®ƒçš„å•é¡Œåœ¨æ–¼å¦‚æœè£¡é¢æœ‰éŒ¯èª¤ï¼Œæˆ‘ä¸çŸ¥é“è©²å¾å“ªè£¡è¿½èµ·ã€‚</strong></p>\n<p><strong>å–æ±ºæ–¼å“ªå€‹ callbacks æˆ–äº‹ä»¶æ‰€è§¸ç™¼çš„é †åºï¼Œé€™å€‹ç¨‹å¼ç¢¼æœ‰çˆ†ç‚¸æ€§å¤šçš„å¯èƒ½åŸ·è¡Œçš„ç¨‹å¼ç¢¼çš„é †åºã€‚</strong> åœ¨å®ƒå€‘ä¹‹ä¸­çš„æŸäº›ï¼Œæˆ‘å¯ä»¥çœ‹åˆ°æ­£ç¢ºçš„è¨Šæ¯ï¼Œå…¶ä»–çš„ï¼Œæˆ‘æœƒçœ‹åˆ°å¤šå€‹å¾®èª¿ã€å¤±æ•—ã€éŒ¯èª¤è¨Šæ¯å‡ºç¾åœ¨ä¸€èµ·ï¼Œè€Œä¸”é‚„å¯èƒ½æœƒæ•´å€‹å´©å£ã€‚</p>\n<p>é€™å€‹å‡½å¼æœ‰å››å€‹éƒ¨åˆ†è€Œä¸”ä¸¦ä¸èƒ½ä¿è­‰å®ƒå€‘çš„ç™¼ç”Ÿé †åºã€‚æˆ‘éå¸¸ä¸ç§‘å­¸åš´è¬¹çš„è¨ˆç®—å‘Šè¨´æˆ‘ï¼Œé€™è£¡æœƒæœ‰ 4Ã—3Ã—2Ã—1 = 24 ç¨®ä¸åŒçš„å¯èƒ½çš„åŸ·è¡Œé †åºã€‚å¦‚æœæˆ‘å†å¢åŠ å››å°æ®µç¨‹å¼ç¢¼ï¼Œå®ƒæœƒè®Šæˆ 8Ã—7Ã—6Ã—5Ã—4Ã—3Ã—2Ã—1 - <em>å››è¬</em>ç¨®çµ„åˆã€‚ç¥ä½ å¹«å®ƒé™¤éŒ¯é †åˆ©ã€‚</p>\n<p><strong>æ›å¥è©±èªªï¼Œé€™å€‹æ–¹æ³•çš„ Bug-O æ˜¯ ğŸ(<i>n!</i>)</strong>ï¼Œ<em>n</em> æ˜¯ç¢°åˆ° DOM çš„ç¨‹å¼ç¢¼ç‰‡æ®µçš„æ•¸é‡ã€‚è€¶ï¼Œä»–æ˜¯å€‹<em>éšå±¤</em>ã€‚ç•¶ç„¶ï¼Œæˆ‘ä¸æ˜¯éå¸¸ç§‘å­¸åš´è¬¹çš„ã€‚å¯¦éš›ä¸Šä¸¦ä¸æ˜¯æ‰€æœ‰çš„ç¨‹åºéƒ½æœƒç™¼ç”Ÿã€‚ä½†å¦ä¸€æ–¹é¢ï¼Œæ¯å€‹å°ç‰‡æ®µå¯èƒ½è·‘è¶…éä¸€æ¬¡ã€‚<span style=\"word-break: keep-all\">ğŸ(<em>Â¯\\_(ãƒ„)_/Â¯</em>)</span>å¯èƒ½å¯ä»¥æ›´ç²¾ç¢ºï¼Œä½†å®ƒä»ç„¶æ»¿ç³Ÿçš„ï¼Œæˆ‘å€‘å¯ä»¥åšå¾—æ›´å¥½ã€‚</p>\n<hr>\n<p>ç‚ºäº†æ”¹å–„é€™ä»½ç¨‹å¼ç¢¼çš„ Bug-Oï¼Œæˆ‘å€‘å¯ä»¥é™åˆ¶å¯èƒ½çš„ç‹€æ…‹ä»¥åŠçµæœçš„æ•¸é‡ã€‚æˆ‘å€‘ä¸éœ€è¦ä»»ä½•å¥—ä»¶ä¾†åšé€™ä»¶äº‹ï¼Œé€™åªæ˜¯å€‹æŸç¨®å¼·è¿«ç¨‹å¼ç¢¼çµæ§‹çš„æ–¹æ³•ã€‚ä»¥ä¸‹æ˜¯ä¸€ç¨®å¯è¡Œçš„æ–¹æ³•ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">let</span> currentState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  step<span class=\"token operator\">:</span> <span class=\"token string\">'initial'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 'initial' | 'pending' | 'success' | 'error'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">trySubmit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currentState<span class=\"token punctuation\">.</span>step <span class=\"token operator\">===</span> <span class=\"token string\">'pending'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ä¸å…è¨±é€å‡ºå…©æ¬¡</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> step<span class=\"token operator\">:</span> <span class=\"token string\">'pending'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">submitForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> step<span class=\"token operator\">:</span> <span class=\"token string\">'success'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> step<span class=\"token operator\">:</span> <span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> error <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nextState</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// æ¸…æ‰æ‰€æœ‰å·²ç¶“å­˜åœ¨çš„å°å­©</span>\n  formStatus<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n\n  currentState <span class=\"token operator\">=</span> nextState<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>nextState<span class=\"token punctuation\">.</span>step<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'initial'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'pending'</span><span class=\"token operator\">:</span>\n      formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>spinner<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'success'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">let</span> successMessage <span class=\"token operator\">=</span> <span class=\"token function\">createSuccessMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>successMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'error'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">let</span> errorMessage <span class=\"token operator\">=</span> <span class=\"token function\">createErrorMessage</span><span class=\"token punctuation\">(</span>nextState<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">let</span> retryButton <span class=\"token operator\">=</span> <span class=\"token function\">createRetryButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>errorMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>retryButton<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      retryButton<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> trySubmit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>é€™æ®µç¨‹å¼ç¢¼å¯èƒ½çœ‹èµ·ä¾†æ²’ä»€éº¼å·®ç•°ï¼Œä»–ç”šè‡³è®Šå¾—æœ‰é»å†—é•·ï¼Œä½†å®ƒ<em>æˆ²åŠ‡æ€§çš„</em>å› ç‚ºé€™è¡Œç¨‹å¼ç¢¼è®“é™¤éŒ¯è®Šå¾—æ›´ç°¡å–®ï¼š</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nextState</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// æ¸…æ‰æ‰€æœ‰å·²ç¶“å­˜åœ¨çš„å°å­©</span>\n<span class=\"gatsby-highlight-code-line\">  formStatus<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token comment\">// ... å¢åŠ æ±è¥¿åˆ° formStatus çš„ç¨‹å¼ç¢¼ ...</span></code></pre></div>\n<p>è—‰ç”±åœ¨åšä»»ä½•æ“ä½œä»¥å‰æ¸…æ‰è¡¨æ ¼çš„ç‹€æ…‹ï¼Œæˆ‘å€‘å¯ä»¥ä¿è­‰æˆ‘å€‘åœ¨æ“ä½œ DOM çš„æ™‚å€™æ°¸é éƒ½æ˜¯å¾é›¶é–‹å§‹ã€‚é€™å€‹å°±æ˜¯æˆ‘å€‘å¦‚ä½•å°æŠ—é›£ä»¥é¿å…çš„<a href=\"/the-elements-of-ui-engineering/\">äº‚åº¦</a> - è—‰ç”±<em>ä¸è®“</em>éŒ¯èª¤ç´¯ç¸¾ã€‚é€™å€‹ç­‰åŒæ–¼ç¨‹å¼ç¢¼çš„ã€Œé—œæ‰å®ƒå†é‡æ–°æ‰“é–‹å®ƒã€ï¼Œå®ƒé‹ä½œåœ°ä»¤äººé©šè¨çš„å¥½ã€‚</p>\n<p><strong>å¦‚æœè¼¸å‡ºæœ‰ä»»ä½•éŒ¯èª¤ï¼Œæˆ‘å€‘åªéœ€è¦å¾€å›æƒ³<em>ä¸€æ­¥</em> - åˆ°å‰ä¸€å€‹å‘¼å« <code class=\"language-text\">setState</code> çš„åœ°æ–¹ã€‚</strong> é™¤éŒ¯ä¸€å€‹æ¸²æŸ“çš„çµæœçš„ Bug-O æ˜¯ ğŸ(<em>n</em>)ï¼Œ<em>n</em> æ˜¯å¯èƒ½ç™¼ç”Ÿçš„æ¸²æŸ“è·¯å¾‘çš„æ•¸é‡ã€‚åœ¨é€™è£¡ï¼Œå®ƒå°±æ˜¯å››ï¼ˆå› ç‚ºæˆ‘å€‘åœ¨ <code class=\"language-text\">switch</code> è£¡æœ‰å››ç¨®æƒ…æ³ï¼‰ã€‚</p>\n<p>æˆ‘å€‘åœ¨<em>è¨­å®š</em>ç‹€æ…‹çš„æ™‚å€™å¯èƒ½é‚„æ˜¯æœ‰ç«¶çˆ­æ¢ä»¶ (race conditions)ï¼Œä½†å› ç‚ºæ¯å€‹ä¸­é–“çš„ç‹€æ…‹éƒ½å¯ä»¥è¢«è¨˜éŒ„å’Œæª¢æŸ¥ï¼Œé™¤éŒ¯è®Šå¾—æ›´å®¹æ˜“ã€‚æˆ‘å€‘ä¹Ÿå¯ä»¥æ˜ç¢ºåœ°ä¸å…è¨±ä»»ä½•ä¸æƒ³è¦çš„éæ¸¡ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">trySubmit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currentState<span class=\"token punctuation\">.</span>step <span class=\"token operator\">===</span> <span class=\"token string\">'pending'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ä¸å…è¨±é€å‡ºå…©æ¬¡</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>ç•¶ç„¶ï¼Œæ°¸é é‡è¨­ DOM æœƒå¸¶ä¾†ä¸€äº›ä»£åƒ¹ã€‚æ¯æ¬¡éƒ½ç§»é™¤å’Œé‡æ–°ç”¢ç”Ÿ DOM æœƒç ´å£å®ƒçš„å…§éƒ¨ç‹€æ…‹ã€å¤±å»ç„¦é»å’Œå°è‡´å¤§å‹æ‡‰ç”¨ç¨‹å¼è£¡ç³Ÿç³•çš„æ•ˆèƒ½å•é¡Œã€‚</p>\n<p>é€™å°±æ˜¯ç‚ºä»€éº¼åƒ React é€™æ¨£çš„å¥—ä»¶å¯ä»¥å¾ˆæœ‰å¹«åŠ©ã€‚å®ƒå€‘è®“ä½ æ“æœ‰ç¸½æ˜¯å¾é ­é–‹å§‹é‡æ–°å‰µå»º UI çš„ç¯„ä¾‹ä¸­<em>æ€è€ƒ</em>è€Œä¸å¿…çœŸçš„é€™æ¨£åšï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">FormStatus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    step<span class=\"token operator\">:</span> <span class=\"token string\">'initial'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleSubmit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">.</span>step <span class=\"token operator\">===</span> <span class=\"token string\">'pending'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// ä¸å…è¨±é€å‡ºå…©æ¬¡</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> step<span class=\"token operator\">:</span> <span class=\"token string\">'pending'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">submitForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> step<span class=\"token operator\">:</span> <span class=\"token string\">'success'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> step<span class=\"token operator\">:</span> <span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> error <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">let</span> content<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">.</span>step<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'pending'</span><span class=\"token operator\">:</span>\n      content <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Spinner</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'success'</span><span class=\"token operator\">:</span>\n      content <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SuccessMessage</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'error'</span><span class=\"token operator\">:</span>\n      content <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ErrorMessage</span></span> <span class=\"token attr-name\">error</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RetryButton</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleSubmit<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleSubmit<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>content<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>é€™æ®µç¨‹å¼ç¢¼å¯èƒ½çœ‹èµ·ä¾†ä¸å¤ªä¸€æ¨£ï¼Œä½†åŸå‰‡æ˜¯ç›¸åŒçš„ã€‚å…ƒä»¶çš„æŠ½è±¡åŒ–å¼·åˆ¶äº†é‚Šç•Œï¼Œæ‰€ä»¥ä½ çŸ¥é“åœ¨é€™é æ²’æœ‰<em>å…¶ä»–</em>ç¨‹å¼ç¢¼å¯ä»¥å¼„äº‚å®ƒçš„ DOM æˆ–ç‹€æ…‹ã€‚å…ƒä»¶åŒ–å¹«åŠ©æ¸›å°‘ Bug-Oã€‚</p>\n<p>äº‹å¯¦ä¸Šï¼Œå¦‚æœ<em>ä»»ä½•ä¸€å€‹</em>åœ¨ React æ‡‰ç”¨ç¨‹å¼è£¡çš„ DOM çš„å€¼çœ‹èµ·ä¾†æœ‰éŒ¯ï¼Œä½ å¯ä»¥è—‰ç”±ä¸€å€‹ä¸€å€‹è§€å¯Ÿåœ¨ React æ¨¹è£¡çš„å…ƒä»¶çš„ç¨‹å¼ç¢¼ä¾†è¿½è¹¤åˆ°å®ƒåœ¨å“ªè£¡ã€‚ç„¡è«–æ‡‰ç”¨ç¨‹å¼çš„å¤§å°ï¼Œè¿½è¹¤ä¸€å€‹æ¸²æŸ“çš„å€¼æ˜¯ ğŸ(<em>æ¨¹çš„é«˜åº¦</em>)ã€‚</p>\n<p><strong>ä¸‹ä¸€æ¬¡ç•¶ä½ çœ‹è¦‹é—œæ–¼ API çš„è¨è«–ï¼Œè©¦è‘—æ€è€ƒï¼šå®ƒçš„ä¸€èˆ¬é™¤éŒ¯çš„ ğŸ(<em>n</em>) æ˜¯å¤šå°‘ï¼Ÿ</strong>é‚£ä½ ç†Ÿæ‚‰çš„å·²ç¶“å­˜åœ¨çš„ API å’ŒåŸå‰‡çš„åˆæ˜¯å¤šå°‘å‘¢ï¼Ÿ Reduxã€CSSã€ç¹¼æ‰¿ - å®ƒå€‘éƒ½æœ‰è‡ªå·±çš„ Bug-Oã€‚</p>\n<hr>","timeToRead":6,"frontmatter":{"title":"ã€ŒBug-Oã€ ç¬¦è™Ÿ","date":"January 25, 2019","spoiler":"ä½ çš„ APIÂ çš„ ğŸ(<i>n</i>) æ˜¯ä»€éº¼ï¼Ÿ","cta":null},"fields":{"slug":"/zh-hant/the-bug-o-notation/","langKey":"zh-hant"}}},"pageContext":{"slug":"/zh-hant/the-bug-o-notation/","translations":["fr","es","ja","ko","uk","zh-hans","zh-hant"],"translatedLinks":["/optimized-for-change/"]}}}