{"componentChunkName":"component---src-templates-blog-post-js","path":"/es/how-does-react-tell-a-class-from-a-function/","result":{"data":{"site":{"siteMetadata":{"title":"Overreacted","author":"Dan Abramov"}},"markdownRemark":{"id":"e5def8bb-aa64-54a4-9787-556dfde9da0a","html":"<p>Considera este componente <code class=\"language-text\">Saludo</code> definido como una funci√≥n:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Saludo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hola</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>React tambi√©n permite definirlo como una clase:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Saludo</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hola</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>(Hasta <a href=\"https://reactjs.org/docs/hooks-intro.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">hace poco</a>, esa era la √∫nica forma de utilizar caracter√≠sticas como el estado.)</p>\n<p>Cuando se quiere renderizar un componente <code class=\"language-text\">&lt;Saludo /&gt;</code>, no importa c√≥mo se define:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Clase o funci√≥n ‚Äî no importa.</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Saludo</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>¬øPero a <em>React</em> s√≠ que le importa la diferencia!</p>\n<p>Si <code class=\"language-text\">Saludo</code> es una funci√≥n, React necesita invocarla:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Tu c√≥digo</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Saludo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hola</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Dentro de React</span>\n<span class=\"token keyword\">const</span> resultado <span class=\"token operator\">=</span> <span class=\"token function\">Saludo</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// &lt;p>Hola&lt;/p></span></code></pre></div>\n<p>Pero si <code class=\"language-text\">Saludo</code> es una clase, React necesita instanciarla con el operador <code class=\"language-text\">new</code> y <em>luego</em> invocar el m√©todo <code class=\"language-text\">render</code> en la instancia reci√©n creada:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Tu c√≥digo</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Saludo</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hola</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Dentro de React</span>\n<span class=\"token keyword\">const</span> instancia <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Saludo</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Saludo {}</span>\n<span class=\"token keyword\">const</span> resultado <span class=\"token operator\">=</span> instancia<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// &lt;p>Hola&lt;/p></span></code></pre></div>\n<p>En ambos casos el objetivo de React es obtener el nodo renderizado (en este ejemplo, <code class=\"language-text\">&lt;p&gt;Hola&lt;/p&gt;</code>). Pero los pasos exactos dependen de c√≥mo se define <code class=\"language-text\">Saludo</code>.</p>\n<p><strong>¬øPero c√≥mo sabe React si algo es una clase o una funci√≥n?</strong></p>\n<p>Tal y como dije en mi <a href=\"/why-do-we-write-super-props/\">art√≠culo anterior</a>, <strong>no <em>necesitas</em> saber esto para ser productivo en React.</strong> Yo me pas√© a√±os sin saberlo. Por favor no conviertas esto en una pregunta de entrevista. De hecho, este art√≠culo es m√°s sobre Javascript que sobre React.</p>\n<p>Este blog es para el lector curioso que quiere saber <em>por qu√©</em> React funciona de cierta manera. ¬øEres esa persona? Si es as√≠, profundicemos juntos.</p>\n<p><strong>Este es un viaje largo, as√≠ que abr√≥chate el cintur√≥n. Este art√≠culo no tiene mucha informaci√≥n sobre React en s√≠, pero analizaremos algunos aspectos de <code class=\"language-text\">new</code>, <code class=\"language-text\">this</code>, <code class=\"language-text\">class</code>, funciones flecha, <code class=\"language-text\">prototype</code>, <code class=\"language-text\">__proto__</code>, <code class=\"language-text\">instanceof</code>, y como todas funcionan en conjunto en JavaScript. Afortunadamente, no necesitas pensar mucho sobre estas cosas cuando <em>usas</em> React. Cuando implementas React la historia es otra‚Ä¶</strong></p>\n<p>(Si lo √∫nico que quieres es saber la respuesta, ve justo hasta el final).</p>\n<hr>\n<p>Primero, necesitamos entender por qu√© es importante tratar a las funciones y a las clases de manera diferente. Nota como usamos el operador <code class=\"language-text\">new</code> cuando se invoca una clase:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Si Saludo es una funci√≥n</span>\n<span class=\"token keyword\">const</span> resultado <span class=\"token operator\">=</span> <span class=\"token function\">Saludo</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// &lt;p>Hola&lt;/p></span>\n\n<span class=\"token comment\">// Si Saludo es una clase</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> instancia <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Saludo</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Saludo {}</span></span><span class=\"token keyword\">const</span> resultado <span class=\"token operator\">=</span> instancia<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// &lt;p>Hola&lt;/p></span></code></pre></div>\n<p>Veamos a grandes rasgos lo que hace el operador <code class=\"language-text\">new</code> en JavaScript.</p>\n<hr>\n<p>En los viejos tiempos, Javascript no ten√≠a clases. Sin embargo pod√≠as expresar un patr√≥n similar a las clases usando funciones comunes. <strong>En concreto, se pod√≠a usar <em>cualquier</em> funci√≥n en un papel similar al de un constructor de clase al a√±adir <code class=\"language-text\">new</code> antes de la invocaci√≥n:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Solo una funci√≥n</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Persona</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nombre</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nombre <span class=\"token operator\">=</span> nombre<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> fred <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Persona</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Fred'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ‚úÖ Persona {nombre: 'Fred'}</span>\n<span class=\"token keyword\">var</span> george <span class=\"token operator\">=</span> <span class=\"token function\">Persona</span><span class=\"token punctuation\">(</span><span class=\"token string\">'George'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// üî¥ No funcionar√°</span></code></pre></div>\n<p>¬°A√∫n hoy se puede escribir c√≥digo como este! Pru√©balo en las herramientas de desarrollo.</p>\n<p>Si invocabas <code class=\"language-text\">Persona(&#39;Fred&#39;)</code> <strong>sin</strong> <code class=\"language-text\">new</code>, dentro de ella <code class=\"language-text\">this</code> apuntar√≠a a algo global e in√∫til (por ejemplo <code class=\"language-text\">window</code> o <code class=\"language-text\">undefined</code>). Por lo que nuestro c√≥digo fallar√≠a o har√≠a algo est√∫pido como asignarle un valor a <code class=\"language-text\">window.name</code>.</p>\n<p>Al a√±adir <code class=\"language-text\">new</code> antes de la invocaci√≥n, estamos diciendo: ¬´JavaScript, s√© que <code class=\"language-text\">Persona</code> es solo una funci√≥n pero finjamos que es algo como un constructor de clase. <strong>Crea un objeto <code class=\"language-text\">{}</code> y pon a apuntar a <code class=\"language-text\">this</code> dentro de la funci√≥n <code class=\"language-text\">Persona</code> a ese objeto; para que as√≠ yo pueda asignar cosas como <code class=\"language-text\">this.name</code>. Por √∫ltimo, devu√©lveme ese objeto.</strong>‚Äù</p>\n<p>Eso es lo que el operador <code class=\"language-text\">new</code> hace.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">var</span> fred <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Persona</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Fred'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// El mismo objeto que `this` dentro de `Persona`</span></code></pre></div>\n<p>El operador <code class=\"language-text\">new</code> tambi√©n pone a disposici√≥n dentro del objeto <code class=\"language-text\">fred</code> todo lo que pongamos en <code class=\"language-text\">Persona.prototype</code>.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Persona</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nombre</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nombre <span class=\"token operator\">=</span> nombre<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token class-name\">Persona</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">diHola</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hola, Soy '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nombre<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span></span>\n<span class=\"token keyword\">var</span> fred <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Persona</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Fred'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">fred<span class=\"token punctuation\">.</span><span class=\"token function\">diHola</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<p>As√≠ es como las personas emulaban las clases antes que Javascript las a√±adiera directamente.</p>\n<hr>\n<p>As√≠ que <code class=\"language-text\">new</code> ha estado rondando JavaScript por bastante tiempo. Sin embargo, las clases son mucho m√°s recientes; ellas nos permiten reescribir el c√≥digo anterior para acercarnos m√°s a lo que intentamos expresar:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Persona</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nombre</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nombre <span class=\"token operator\">=</span> nombre<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">diHola</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hola, Soy '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nombre<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> fred <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Persona</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Fred'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nfred<span class=\"token punctuation\">.</span><span class=\"token function\">diHola</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><em>Capturar la intenci√≥n del desarrollador</em> es importante en el dise√±o de lenguajes y API.</p>\n<p>Si escribes una funci√≥n, Javascript no puede adivinar si la intenci√≥n es ser invocada como <code class=\"language-text\">alert()</code> o si funciona como un constructor como <code class=\"language-text\">new Persona()</code>. Si se olvidara especificar <code class=\"language-text\">new</code> para una funci√≥n como <code class=\"language-text\">Persona</code>, ello conducir√≠a a un comportamiento confuso.</p>\n<p><strong>La sintaxis de las clases nos permiten decir: ¬´Esto no es solo una funci√≥n ‚Äî es una clase y tiene un constructor¬ª.</strong> Si olvidas <code class=\"language-text\">new</code> al invocarla, Javascript elevar√° un error:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">let</span> fred <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Persona</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Fred'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ‚úÖ  Si Persona es una funci√≥n: no hay problemas</span>\n<span class=\"token comment\">// ‚úÖ  Si Persona es una clase: tampoco hay problemas</span>\n\n<span class=\"token keyword\">let</span> george <span class=\"token operator\">=</span> <span class=\"token function\">Persona</span><span class=\"token punctuation\">(</span><span class=\"token string\">'George'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Olvidamos `new`</span>\n<span class=\"token comment\">// üò≥ Si Persona es un funci√≥n tipo constructor: comportamiento confuso</span>\n<span class=\"token comment\">// üî¥ Si Persona es una clase: falla inmediatamente</span></code></pre></div>\n<p>Esto nos ayuda a detectar el error r√°pidamente en lugar de esperar por alg√∫n error oculto como que <code class=\"language-text\">this.name</code> sea tratado como <code class=\"language-text\">window.name</code> y no <code class=\"language-text\">george.name</code>.</p>\n<p>Sin embargo, ello significa que React necesita poner <code class=\"language-text\">new</code> antes de invocar cualquier clase. No puede simplemente invocarla como una funci√≥n regular, ¬°pues Javascript lo tratar√≠a como un error!</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Contador</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hola</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// üî¥ React no puede hacer esto:</span>\n<span class=\"token keyword\">const</span> instancia <span class=\"token operator\">=</span> <span class=\"token function\">Contador</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Esto claramente trae problemas.</p>\n<hr>\n<p>Antes de ver c√≥mo React lo resuelve, es importante recordar que la mayor√≠a de las personas que usan React utilizan compiladores como Babel para traducir caracter√≠sticas modernas como las clases a algo que puedan entender los navegadores antiguos. Por tanto, debemos considerar a los compiladores en nuestro dise√±o.</p>\n<p>En las primeras versiones de Babel, se pod√≠an invocar las clases sin <code class=\"language-text\">new</code>. Sin embargo, eso se solucion√≥ ‚Äî con la generaci√≥n de alg√∫n c√≥digo extra:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Persona</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nombre</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Un fragmento simplificado de la salida de Babel:</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Persona</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TypeError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"No se puede invocar una clase como una funci√≥n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// Nuestro c√≥digo:</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nombre <span class=\"token operator\">=</span> nombre<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Persona</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Fred'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ‚úÖ Bien</span>\n<span class=\"token function\">Persona</span><span class=\"token punctuation\">(</span><span class=\"token string\">'George'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// üî¥ No se puede llamar una clase como una funci√≥n</span></code></pre></div>\n<p>Puede que hayas visto c√≥digo como este en tu archivo compilado. Eso es lo que hacen todas esas funciones <code class=\"language-text\">_classCallCheck</code>. (Puedes reducir el tama√±o del resultado de la compilaci√≥n si optas por el ¬´modo relajado¬ª (<em>loose mode</em>) sin chequeos pero ello puede complicar tu eventual transici√≥n a clases nativas reales.)</p>\n<hr>\n<p>Hasta este punto deber√≠as comprender a grandes rasgos la diferencia entre invocar algo con <code class=\"language-text\">new</code> y sin <code class=\"language-text\">new</code>:</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th><code class=\"language-text\">new Persona()</code></th>\n<th><code class=\"language-text\">Persona()</code></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">clase</code></td>\n<td>‚úÖ <code class=\"language-text\">this</code> es una instancia de <code class=\"language-text\">Persona</code></td>\n<td>üî¥ <code class=\"language-text\">TypeError</code></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">funci√≥n</code></td>\n<td>‚úÖ <code class=\"language-text\">this</code> es una instancia de <code class=\"language-text\">Persona</code></td>\n<td>üò≥ <code class=\"language-text\">this</code> es <code class=\"language-text\">window</code> o <code class=\"language-text\">undefined</code></td>\n</tr>\n</tbody>\n</table>\n<p>Por eso es importante para React invocar tu componente de manera correcta. <strong>Si tu componente se define como una clase, React necesita usar <code class=\"language-text\">new</code> cuando lo invoca.</strong></p>\n<p>Entonces, ¬øpuede React simplemente chequear si algo es una clase o no?</p>\n<p>¬°No tan f√°cil! A√∫n si pudi√©semos <a href=\"https://stackoverflow.com/questions/29093396/how-do-you-check-the-difference-between-an-ecmascript-6-class-and-function\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">diferenciar una clase de una funci√≥n en JavaScript</a>, no funcionar√≠a para las clases procesadas por herramientas como Babel. Para el navegador, solo son simples funciones. Mala suerte para React.</p>\n<hr>\n<p>Bien, ¬øquiz√° React podr√≠a usar <code class=\"language-text\">new</code> en cada invocaci√≥n? Desafortunadamente, eso tampoco funciona siempre.</p>\n<p>Con funciones comunes, invocarlas con <code class=\"language-text\">new</code> les dar√≠a una instancia de objeto como <code class=\"language-text\">this</code>. Eso es deseable para funciones escritas como un constructor (como nuestra anterior <code class=\"language-text\">Persona</code>), pero ser√≠a confuso para las componentes de funci√≥n:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Saludo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// No esperar√≠amos aqu√≠ que `this` sea alg√∫n tipo de instancia</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hola</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Sin embargo, eso ser√≠a tolerable. Hay <em>otras</em> dos razones para descartar esa idea.</p>\n<hr>\n<p>La primera raz√≥n por la que usar siempre <code class=\"language-text\">new</code> no funcionar√≠a es que en el caso de las funciones flecha nativas (no las que compila Babel), invocarlas con <code class=\"language-text\">new</code> lanza un error:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Saludo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hola</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Saludo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// üî¥ Saludo no es un constructor</span></code></pre></div>\n<p>Este comportamiento es intencional y se desprende del dise√±o de las funciones flecha. Uno de los principales beneficios de las funciones flecha es que <em>no</em> tienen su propio valor <code class=\"language-text\">this</code> ‚Äî en su lugar <code class=\"language-text\">this</code> se resuelve a partir de la funci√≥n com√∫n m√°s cercana:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Amigos</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>    <span class=\"token keyword\">const</span> amigos <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>amigos<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> amigos<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">amigo</span> <span class=\"token operator\">=></span>\n      <span class=\"token operator\">&lt;</span>Amigo\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token comment\">// `this` se resuelve a partir del m√©todo `render`</span></span><span class=\"gatsby-highlight-code-line\">        tama√±o<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>tama√±o<span class=\"token punctuation\">}</span></span>        nombre<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>amigo<span class=\"token punctuation\">.</span>nombre<span class=\"token punctuation\">}</span>\n        key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>amigo<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Bien, as√≠ que <strong>las funciones flecha no tienen su propio <code class=\"language-text\">this</code>.</strong> ¬°Pero eso significa que ser√≠an completamente in√∫tiles como constructores!</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Persona</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">nombre</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// üî¥ ¬°Esto no tendr√≠a sentido!</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nombre <span class=\"token operator\">=</span> nombre<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Por tanto, <strong>Javascript no permite invocar una funci√≥n flecha con <code class=\"language-text\">new</code>.</strong> Si lo haces, probablemente es un error, y es mejor dec√≠rtelo pronto. Es similar a como Javascript no te permite invocar una clase <em>sin</em> <code class=\"language-text\">new</code>.</p>\n<p>Eso es bueno, pero nos arruina el plan. React no puede simplemente invocar con <code class=\"language-text\">new</code> a todo ¬°porque har√≠a fallar a las funciones flecha! Podr√≠amos intentar detectar espec√≠ficamente a las funciones flecha por su falta de <code class=\"language-text\">prototype</code>, y no invocarlas con <code class=\"language-text\">new</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// undefined</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// {constructor: f}</span></code></pre></div>\n<p>Pero esto <a href=\"https://github.com/facebook/react/issues/4599#issuecomment-136562930\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">no funcionar√≠a</a> para funciones compiladas con Babel; lo que podr√≠a no ser de gran importancia, pero hay otra raz√≥n que hace de esta v√≠a un callej√≥n sin salida.</p>\n<hr>\n<p>Otra raz√≥n por la que no podemos usar siempre <code class=\"language-text\">new</code> es que evitar√≠a que React diera soporte a componentes que devuelven cadenas u otros tipos primitivos.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Saludo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token string\">'Hola'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">Saludo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ‚úÖ 'Hola'</span>\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Saludo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// üò≥ Saludo {}</span></code></pre></div>\n<p>De nuevo, Esto tiene que ver con las rarezas del dise√±o del <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">operador <code class=\"language-text\">new</code></a>. Como vimos antes, <code class=\"language-text\">new</code> le dice al motor de Javascript que cree un objeto, que dentro de la funci√≥n ese objeto sea <code class=\"language-text\">this</code>, y luego nos devuelva ese objeto como resultado de <code class=\"language-text\">new</code>.</p>\n<p>Sin embargo, Javascript tambi√©n permite que una funci√≥n invocada con <code class=\"language-text\">new</code> <em>sobreescriba</em> el valor de retorno de <code class=\"language-text\">new</code> devolviendo alg√∫n otro objeto. Presumiblemente, esto se consider√≥ util para patrones como <em>pool</em> en el que se quiere reutilizar instancias:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// Inicializaci√≥n perezosa</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">var</span> vectorCero <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Vector</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> y <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>vectorCero <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// Reutilizar la misma instancia</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> vectorCero<span class=\"token punctuation\">;</span></span>    <span class=\"token punctuation\">}</span>\n    vectorCero <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> x<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> y<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">var</span> b <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">var</span> c <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// üò≤ b === c</span></span></code></pre></div>\n<p>Sin embargo, <code class=\"language-text\">new</code> adem√°s <em>ignora completamente</em> el valor de retorno de una funci√≥n si este no es un objeto. Si devuelves una cadena o un n√∫mero, es como si no hubiera <code class=\"language-text\">return</code> en lo absoluto.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Answer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">42</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">Answer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ‚úÖ 42</span>\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Answer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// üò≥ Answer {}</span></code></pre></div>\n<p>Simplemente no hay manera de leer un valor de retorno primitivo (como un n√∫mero o una cadena) de una funci√≥n cuando se invoca con <code class=\"language-text\">new</code>. As√≠ que si React siempre usase <code class=\"language-text\">new</code>, ser√≠a incapaz de a√±adir soporte para componentes que devuelven cadenas!</p>\n<p>Eso es inaceptable por lo que necesitamos una soluci√≥n intermedia.</p>\n<hr>\n<p>¬øQu√© aprendimos hasta ahora? React necesita invocar a las clases (incluidas las de la salida de Babel) <em>con</em> <code class=\"language-text\">new</code>, pero necesita invocar a las funciones comunes y a las funciones flechas (incluidas las de la salida de Babel) <em>sin</em> <code class=\"language-text\">new</code>. Y no hay forma confiable de distinguirlas.</p>\n<p><strong>Si no podemos resolver un problema general, ¬øpodemos resolver uno m√°s espec√≠fico?</strong></p>\n<p>Cuando defines un componente como una clase, probablemente quieras heredar de <code class=\"language-text\">React.Component</code> para tener disponibles los m√©todos ya incluidos como <code class=\"language-text\">this.setState()</code>. <strong>En lugar de intentar detectar todas las clases, ¬øpodremos detectar solo a los descendientes de <code class=\"language-text\">React.Component</code></strong></p>\n<p>Esp√≥iler: esto es exactamente lo que hace React.</p>\n<hr>\n<p>Quiz√° la forma idiom√°tica de chequear si <code class=\"language-text\">Saludo</code> es un componente de clase de React es realizando la comprobaci√≥n <code class=\"language-text\">Saludo.prototype instanceof React.Component</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">A</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">B</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">A</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">B</span><span class=\"token punctuation\">.</span>prototype <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">A</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code></pre></div>\n<p>S√© lo que est√°s pensando. ¬°¬øQu√© es lo que acaba de ocurrir?! Para responderlo, necesitamos entender los prototipos de JavaScript.</p>\n<p>Puede que est√©s familiarizado con la ¬´cadena de prototipo¬ª. Cada objeto en Javascript puede tener un ¬´prototipo¬ª. Cuando escribimos <code class=\"language-text\">fred.diHola()</code> y el objeto <code class=\"language-text\">fred</code> no tiene un atributo <code class=\"language-text\">diHola</code> lo que hacemos es buscar el atributo <code class=\"language-text\">diHola</code> en el prototipo de <code class=\"language-text\">fred</code>. Si ah√≠ no lo encontramos, buscamos en el pr√≥ximo prototipo de la cadena ‚Äî el prototipo del prototipo de <code class=\"language-text\">fred</code>. Y as√≠ sucesivamente.</p>\n<p><strong>Para hacer las cosas m√°s confusas, el atributo <code class=\"language-text\">prototype</code> de una clase o una funci√≥n <em>no</em> apunta al prototipo de ese valor.</strong> No es broma.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Persona</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Persona</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ü§™ No es el prototipo de Persona</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Persona<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// üò≥ El prototipo de Persona</span></code></pre></div>\n<p>As√≠ que la ¬´cadena de prototipo¬ª es m√°s bien <code class=\"language-text\">__proto__.__proto__.__proto__</code> que <code class=\"language-text\">prototype.prototype.prototype</code>. Me tom√≥ a√±os entender esto.</p>\n<p>¬øQu√© es entonces el atributo <code class=\"language-text\">prototype</code> en una funci√≥n o en una clase? <strong>¬°Es el <code class=\"language-text\">__proto__</code> que se le da a todos los objetos de esa clase o funci√≥n creados con <code class=\"language-text\">new</code>!</strong></p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Persona</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nombre</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nombre <span class=\"token operator\">=</span> nombre<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token class-name\">Persona</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">diHola</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hola, Soy '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nombre<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">var</span> fred <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Persona</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Fred'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// `Persona.prototype` se le asigna a `fred.__proto__`</span></span></code></pre></div>\n<p>Y esa cadena de <code class=\"language-text\">__proto__</code> es como JavaScript busca los atributos:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">fred<span class=\"token punctuation\">.</span><span class=\"token function\">diHola</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 1. ¬øTiene fred un atributo diHola? No.</span>\n<span class=\"token comment\">// 2. ¬øTiene fred.__proto__ un atributo diHola? S√≠. ¬°Invoqu√©moslo!</span>\n\nfred<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 1. ¬øTiene fred un atributo toString? No.</span>\n<span class=\"token comment\">// 2. ¬øTiene fred.__proto__ un atributo toString? No.</span>\n<span class=\"token comment\">// 3. ¬øTiene fred.__proto__.__proto__ un atributo toString? S√≠. ¬°Invoqu√©mosolo!</span></code></pre></div>\n<p>En la pr√°ctica, casi nunca te encontrar√≠as con la necesidad de tocar <code class=\"language-text\">__proto__</code> directamente desde el c√≥digo a menos que est√©s depurando algo relacionado con la cadena de prototipo. Si quieres hacer que algo est√© disponible en <code class=\"language-text\">fred.__proto__</code>, se supone que lo pongas en <code class=\"language-text\">Persona.prototype</code>. Al menos es como se dise√±√≥ originalmente.</p>\n<p>Al principio ni siquiera se supon√≠a que <code class=\"language-text\">__proto__</code> fuera expuesto por los navegadores, porque la cadena de prototipo se consideraba un concepto interno. Pero algunos navegadores a√±adieron <code class=\"language-text\">__proto__</code> y eventualmente fue estandarizado a rega√±adientes (pero despreciado en favor de <code class=\"language-text\">Object.getPrototypeOf()</code>).</p>\n<p><strong>Y aun as√≠ hallo bastante confuso que un atributo llamado <code class=\"language-text\">prototype</code> no te de el prototipo del valor</strong> (por ejemplo, <code class=\"language-text\">fred.prototype</code> no est√° definido porque <code class=\"language-text\">fred</code> no es una funci√≥n). Personalmente, pienso que es la raz√≥n principal por la que a√∫n desarrolladores experimentados tienden a no entender correctamente los prototipos de Javascript.</p>\n<hr>\n<p>¬øEs largo el art√≠culo, eh? Dir√≠a que vamos por el 80%. Aguanta un poco.</p>\n<p>Sabemos que cuando dice <code class=\"language-text\">obj.foo</code>, Javascript lo que en realidad hace es buscar <code class=\"language-text\">foo</code> en <code class=\"language-text\">obj</code>, <code class=\"language-text\">obj.__proto__</code>, <code class=\"language-text\">obj.__proto__.__proto__</code>, y as√≠ sucesivamente.</p>\n<p>Con las clases, no est√°s expuesto directamente a este mecanismo, pero <code class=\"language-text\">extends</code> tambi√©n funciona sobre el viejo patr√≥n de la cadena de prototipo. As√≠ es como nuestra instancia de clase de React tiene acceso a m√©todos como <code class=\"language-text\">setState</code>:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Saludo</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span></span>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hola</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> c <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Saludo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Saludo.prototype</span>\n<span class=\"gatsby-highlight-code-line\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// React.Component.prototype</span></span>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Object.prototype</span>\n\nc<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">// Encontrado en c.__proto__ (Saludo.prototype)</span>\n<span class=\"gatsby-highlight-code-line\">c<span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// Encontrado en c.__proto__.__proto__ (React.Component.prototype)</span></span>c<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// Encontrado en c.__proto__.__proto__.__proto__ (Object.prototype)</span></code></pre></div>\n<p>En otras palabras, <strong>cuando usas clases, una cadena <code class=\"language-text\">__proto__</code> de la instancia ¬´refleja¬ª la jerarqu√≠a de clases:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// cadena `extends`</span>\nSaludo\n  ‚Üí React<span class=\"token punctuation\">.</span>Component\n    ‚Üí <span class=\"token function\">Object</span> <span class=\"token punctuation\">(</span>impl√≠citamente<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// cadena `__proto__`</span>\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Saludo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  ‚Üí <span class=\"token class-name\">Saludo</span><span class=\"token punctuation\">.</span>prototype\n    ‚Üí React<span class=\"token punctuation\">.</span><span class=\"token class-name\">Component</span><span class=\"token punctuation\">.</span>prototype\n      ‚Üí <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype</code></pre></div>\n<p><em>2 Chainz.</em></p>\n<hr>\n<p>Dado que la cadena <code class=\"language-text\">__proto__</code> es un reflejo de la jerarqu√≠a de clases, podemos comprobar si <code class=\"language-text\">Saludo</code> hereda de <code class=\"language-text\">React.Component</code> comenzando con <code class=\"language-text\">Saludo.prototype</code>, y seguir luego hacia abajo en su cadena <code class=\"language-text\">__proto__</code>:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// cadena `__proto__`</span>\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Saludo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"gatsby-highlight-code-line\">  ‚Üí <span class=\"token class-name\">Saludo</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// üïµÔ∏è Comenzamos aqu√≠</span></span><span class=\"gatsby-highlight-code-line\">    ‚Üí React<span class=\"token punctuation\">.</span><span class=\"token class-name\">Component</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// ‚úÖ ¬°Lo encontr√©!</span></span>      ‚Üí <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype</code></pre></div>\n<p>Convenientemente, <code class=\"language-text\">x instanceof Y</code> hace exactamente este tipo de b√∫squeda. Sigue la cadena <code class=\"language-text\">x.__proto__</code> buscando <code class=\"language-text\">Y.prototype</code>.</p>\n<p>Normalmente, se usa para determinar si algo es una instancia de una clase.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">let</span> saludo <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Saludo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>saludo <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Saludo</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token comment\">// saludo (üïµÔ∏è‚Äç Comenzamos aqu√≠)</span>\n<span class=\"token comment\">//   .__proto__ ‚Üí Saludo.prototype (‚úÖ ¬°Lo encontr√©!)</span>\n<span class=\"token comment\">//     .__proto__ ‚Üí React.Component.prototype </span>\n<span class=\"token comment\">//       .__proto__ ‚Üí Object.prototype</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>saludo <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token comment\">// saludo (üïµÔ∏è‚Äç Comenzamos aqu√≠)</span>\n<span class=\"token comment\">//   .__proto__ ‚Üí Saludo.prototype</span>\n<span class=\"token comment\">//     .__proto__ ‚Üí React.Component.prototype (‚úÖ ¬°Lo encontr√©!)</span>\n<span class=\"token comment\">//       .__proto__ ‚Üí Object.prototype</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>saludo <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token comment\">// saludo (üïµÔ∏è‚Äç Comenzamos aqu√≠)</span>\n<span class=\"token comment\">//   .__proto__ ‚Üí Saludo.prototype</span>\n<span class=\"token comment\">//     .__proto__ ‚Üí React.Component.prototype</span>\n<span class=\"token comment\">//       .__proto__ ‚Üí Object.prototype (‚úÖ ¬°Lo encontr√©!)</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>saludo <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Banana</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token comment\">// saludo (üïµÔ∏è‚Äç Comenzamos aqu√≠)</span>\n<span class=\"token comment\">//   .__proto__ ‚Üí Saludo.prototype</span>\n<span class=\"token comment\">//     .__proto__ ‚Üí React.Component.prototype </span>\n<span class=\"token comment\">//       .__proto__ ‚Üí Object.prototype (üôÖ‚Äç ¬°No lo encontr√©!)</span></code></pre></div>\n<p>Pero para determinar si una clase hereda de otra clase tambi√©n funcionar√≠a:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Saludo</span><span class=\"token punctuation\">.</span>prototype <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// saludo</span>\n<span class=\"token comment\">//   .__proto__ ‚Üí Saludo.prototype (üïµÔ∏è‚Äç Comenzamos aqu√≠)</span>\n<span class=\"token comment\">//     .__proto__ ‚Üí React.Component.prototype (‚úÖ ¬°Lo encontr√©!)</span>\n<span class=\"token comment\">//       .__proto__ ‚Üí Object.prototype</span></code></pre></div>\n<p>Y esa comprobaci√≥n permitir√≠a determinar si algo es un componente de clase de React o una funci√≥n com√∫n.</p>\n<hr>\n<p>No obstante, eso no es lo que hace React. üò≥</p>\n<p>Un problema con la soluci√≥n de <code class=\"language-text\">instanceof</code> es que no funciona cuando hay m√∫ltiples copias de React en la p√°gina y el componente que estamos comprobando hereda del <code class=\"language-text\">React.Component</code> de <em>otra</em> copia de React. Mezclar m√∫ltiples copias de React en un proyecto es malo por varias razones, pero hist√≥ricamente hemos tratado de evitar problemas cuando sea posible. (Sin embargo, con los Hooks, <a href=\"https://github.com/facebook/react/issues/13991\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">puede que necesitemos</a> obligar que no exista duplicaci√≥n.)</p>\n<p>Otra posible heur√≠stica podr√≠a ser comprobar la presencia del m√©todo render en el prototipo. Sin embargo, en ese momento <a href=\"https://github.com/facebook/react/issues/4599#issuecomment-129714112\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">no estaba claro</a> como evolucionar√≠a la API de componentes. Cada comprobaci√≥n tiene un costo por lo que no quisi√©ramos a√±adir m√°s de uno. Tampoco funcionar√≠a si <code class=\"language-text\">render</code> se definiera como un m√©todo de instancia, como en la sintaxis de atributos de clase.</p>\n<p>Por lo que en su lugar, React <a href=\"https://github.com/facebook/react/pull/4663\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">agreg√≥</a> un centinela, y es as√≠ c√≥mo sabe si algo es un componente de clase o no.</p>\n<p>Originalmente el centinela estaba en la misma clase base <code class=\"language-text\">React.Component</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Dentro de React</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\nComponent<span class=\"token punctuation\">.</span>isReactClass <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Podemos comprobar de esta forma</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Saludo</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Saludo<span class=\"token punctuation\">.</span>isReactClass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ‚úÖ S√≠</span></code></pre></div>\n<p>Sin embargo, algunas implementaciones de clases que quer√≠amos abordar <a href=\"https://github.com/scala-js/scala-js/issues/1900\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">no</a> copian los atributos est√°ticos (o no establecen el no estandarizado <code class=\"language-text\">__proto__</code>), por lo que el centinela se perd√≠a.</p>\n<p>Es por ello que React <a href=\"https://github.com/facebook/react/pull/5021\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">movi√≥</a> este centinela a <code class=\"language-text\">React.Component.prototype</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Dentro de React</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token class-name\">Component</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>isReactComponent <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Podemos comprobar de esta forma</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Saludo</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Saludo</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>isReactComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ‚úÖ S√≠</span></code></pre></div>\n<p><strong>Y esto es literalmente todo lo que hay que hacer.</strong></p>\n<p>Puedes estarte preguntando por qu√© es un objeto y no simplemente un booleano. No importa mucho en la pr√°ctica, pero las primeras versiones de Jest (antes de que Jest fuera Bueno‚Ñ¢Ô∏è) ten√≠an habilitada por defecto la simulaci√≥n autom√°tica (<em>automocking</em>). Los objetos simulados resultantes omit√≠an los atributos primitivos, <a href=\"https://github.com/facebook/react/pull/4663#issuecomment-136533373\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">afectando la comprobaci√≥n</a>. Gracias, Jest.</p>\n<p>La comprobaci√≥n <code class=\"language-text\">isReactComponent</code> <a href=\"https://github.com/facebook/react/blob/769b1f270e1251d9dbdce0fcbd9e92e502d059b8/packages/react-reconciler/src/ReactFiber.js#L297-L300\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">se usa en React</a> hasta el d√≠a de hoy.</p>\n<p>Si no heredas de <code class=\"language-text\">React.Component</code>, React no encontrar√° <code class=\"language-text\">isReactComponent</code> en el prototipo, y no tratar√° al componente como una clase.</p>\n<p>Ahora sabes porqu√© <a href=\"https://stackoverflow.com/a/42680526/458193\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">la respuesta con m√°s votos positivos</a> para el error <code class=\"language-text\">No se puede invocar una clase como una funci√≥n</code> es a√±adir <code class=\"language-text\">extends React.Component</code>. Al final <a href=\"https://github.com/facebook/react/pull/11168\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">se a√±adi√≥ una advertencia</a> que se activa cuando existe <code class=\"language-text\">prototype.render</code> pero no <code class=\"language-text\">prototype.isReactComponent</code>.</p>\n<hr>\n<p>Se podr√≠a decir que con esta historia les he vendido gato por liebre. <strong>Las soluci√≥n real es muy simple, pero me fui ampliamente por la tangente para explicar <em>por qu√©</em> React termin√≥ usando esta soluci√≥n, y cu√°les era las alternativas.</strong></p>\n<p>De acuerdo a mi experiencia, es lo que ocurre frecuentemente con las API de las bibliotecas. Para que una API sea sencilla de usar, a menudo debes considerar la sem√°ntica del lenguaje (posiblemente la de varios lenguajes, incluyendo direcciones futuras), desempe√±o de ejecuci√≥n, ergonom√≠a con y sin pasos de compilaci√≥n, el estado del ecosistema y las soluciones de empaquetado, advertencias tempranas y muchas otras cosas. El resultado final podr√≠a no ser siempre el m√°s elegante, pero debe ser pr√°ctico.</p>\n<p><strong>Si la API final es exitosa, <em>sus usuarios</em> nunca tendr√°n que pensar en este proceso.</strong> En su lugar se pueden enfocar en crear aplicaciones.</p>\n<p>Pero si adem√°s eres curioso‚Ä¶ es bueno saber c√≥mo funciona.</p>","timeToRead":17,"frontmatter":{"title":"¬øC√≥mo React distingue una clase de una funci√≥n?","date":"December 02, 2018","spoiler":"Hablamos de clases, new, instanceof, cadenas de prototipo, y dise√±o de las API.","cta":null},"fields":{"slug":"/es/how-does-react-tell-a-class-from-a-function/","langKey":"es"}}},"pageContext":{"slug":"/es/how-does-react-tell-a-class-from-a-function/","translations":["es","hu","ja","fr","nl","pt-br","zh-hans","sk","zh-hant"],"translatedLinks":["/why-do-we-write-super-props/"]}}}