{"componentChunkName":"component---src-templates-blog-post-js","path":"/sk/how-does-react-tell-a-class-from-a-function/","result":{"data":{"site":{"siteMetadata":{"title":"Overreacted","author":"Dan Abramov"}},"markdownRemark":{"id":"87196406-be5f-55d4-8bb4-40fe1aa6ac5c","html":"<p>Predstavme si komponentu <code class=\"language-text\">Greeting</code>, ktorÃ¡ je definovanÃ¡ ako funkcia:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Ahoj</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>TÃºto komponentu mÃ´Å¾eme definovaÅ¥ aj ako triedu:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Greeting</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Ahoj</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>(<a href=\"https://reactjs.org/docs/hooks-intro.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">DonedÃ¡vna</a> to bol jedinÃ½ spÃ´sob, ako mohla komponenta udrÅ¾iavaÅ¥ svoj vlastnÃ½ stav.)</p>\n<p>Ak chceme vykresliÅ¥ <code class=\"language-text\">&lt;Greeting /&gt;</code>, nÃ¡s nezaujÃ­ma, ako je komponenta definovanÃ¡:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// BuÄ trieda alebo funkcia</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Greeting</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>AleÂ <em>samotnÃ½ React</em> sa o to zaujÃ­ma!</p>\n<p>Ak je <code class=\"language-text\">Greeting</code> funkcia, React ju musÃ­ zavolaÅ¥:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// VÃ¡Å¡ kÃ³d</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Ahoj</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Vo vnÃºtri Reactu</span>\n<span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token function\">Greeting</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// &lt;p>Ahoj&lt;/p></span></code></pre></div>\n<p>Ale ak je <code class=\"language-text\">Greeting</code> trieda, React ju musÃ­ inicializovaÅ¥ pomocou operÃ¡tora <code class=\"language-text\">new</code> a <em>potom</em> spustiÅ¥ metÃ³du <code class=\"language-text\">render</code> v prÃ¡ve vytvorenej inÅ¡tancii:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// VÃ¡Å¡ kÃ³d</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Greeting</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Ahoj</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Vo vnÃºtri Reactu</span>\n<span class=\"token keyword\">const</span> instance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Greeting {}</span>\n<span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> instance<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// &lt;p>Ahoj&lt;/p></span></code></pre></div>\n<p>V oboch prÃ­padoch je cieÄ¾om Reactu sa dostaÅ¥ k vykreslenÃ©mu objektu (<code class=\"language-text\">&lt;p&gt;Ahoj&lt;/p&gt;</code>). Ale akÃ½m spÃ´sobom, zÃ¡leÅ¾Ã­ od toho, ako je definovanÃ½ <code class=\"language-text\">Greeting</code>.</p>\n<p><strong>Tak ako React vie, Å¾e Äi je nieÄo triedou alebo funkciou?</strong></p>\n<p>Podobne, ako v mojom <a href=\"/why-do-we-write-super-props/\">predchazdajÃºcom prÃ­spevku</a>, <strong>tieto veci <em>nie sÃº</em> dÃ´leÅ¾itÃ© na to, aby ste boli produktÃ­vni pri pouÅ¾Ã­vanÃ­ Reactu.</strong> Ja sÃ¡m som o tom nevedel niekoÄ¾ko rokov. ProsÃ­m, nepÃ½tajte sa to poÄas pohovoru. Popravde, tento prÃ­spevok je viac o JavaScripte neÅ¾ o Reacte.</p>\n<p>Tento blog je pre zaujatÃ©ho ÄitateÄ¾a, ktorÃ½ chce vedieÅ¥, <em>preÄo</em> prÃ¡ve tak React funguje. Ste jednÃ½m z nich? Pozrime sa na to spolu.</p>\n<p><strong>Pripravte sa, ÄakÃ¡ nÃ¡s dlhÃ¡ cesta. Tento prÃ­spevok sa veÄ¾mi nezaoberÃ¡ Reactom, ale pozrieme sa na <code class=\"language-text\">new</code>, <code class=\"language-text\">this</code>, <code class=\"language-text\">class</code>, skrÃ¡tenÃ© funkcie, <code class=\"language-text\">prototype</code>, <code class=\"language-text\">__proto__</code>, <code class=\"language-text\">instanceof</code>, a ako vÅ¡etky tie veci fungujÃº v JavaScripte. NaÅ¡Å¥astie, ak <em>pouÅ¾Ã­vate</em> React, na to ani nemusÃ­te myslieÅ¥. Ale ak chete implementovaÅ¥ Reactâ€¦</strong></p>\n<p>(Ak chcete skrÃ¡tenÃº odpoveÄ, prejdite ku koncu.)</p>\n<hr>\n<p>Najprv musÃ­me pochopiÅ¥ preÄo je dÃ´leÅ¾itÃ© rozoznaÅ¥ funkcie od tried. VÅ¡imnite si, ako sa poÄas inicializÃ¡cie pouÅ¾Ã­va operÃ¡tor <code class=\"language-text\">new</code>:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Ak je Greeting funkcia</span>\n<span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token function\">Greeting</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// &lt;p>Ahoj&lt;/p></span>\n\n<span class=\"token comment\">// Ak je Greeting trieda</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> instance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Greeting {}</span></span><span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> instance<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// &lt;p>Ahoj&lt;/p></span></code></pre></div>\n<p>Pozrime sa, Äo robÃ­ operÃ¡tor <code class=\"language-text\">new</code> v JavaScripte.</p>\n<hr>\n<p>Triedy sÃº v JavaScripte novinkou. PredtÃ½m, keÄ ste chceli nieÄo podobnÃ©, mohli ste urobiÅ¥ z funkcie triedu tak, Å¾e <strong>telo funkcie pouÅ¾ijete ako konÅ¡truktor novej triedy, a pred nÃ¡zov funkcie dÃ¡te slovÃ­Äko <code class=\"language-text\">new</code>.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// ObyÄajnÃ¡ funkcia</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> jan <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'JÃ¡n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// âœ… Person {name: 'JÃ¡n'}</span>\n<span class=\"token keyword\">var</span> richard <span class=\"token operator\">=</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Richard'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ğŸ”´ To nepÃ´jde</span></code></pre></div>\n<p>Aj teraz to mÃ´Å¾ete urobiÅ¥! SkÃºste si to v nÃ¡strojoch pre vÃ½vojÃ¡rov. (DevTools / â€œPreskÃºmaÅ¥ prvokâ€)</p>\n<p>Ak spustÃ­te <code class=\"language-text\">Person(&#39;JÃ¡n&#39;)</code> <strong>bez</strong> slovÃ­Äka <code class=\"language-text\">new</code>, <code class=\"language-text\">this</code> bude v tom kontexte nieÄo, Äo vÃ´bec nesÃºvisÃ­ s <code class=\"language-text\">Person</code> (naprÃ­klad <code class=\"language-text\">window</code> alebo <code class=\"language-text\">undefined</code>). TakÅ¾e nÃ¡Å¡ kÃ³d by buÄ nefungoval, alebo by urobil nejakÃº hlÃºposÅ¥ a nastavil by <code class=\"language-text\">window.name</code>.</p>\n<p>Ak pred spustenÃ­m dÃ¡me slovÃ­Äko <code class=\"language-text\">new</code>, prikÃ¡Å¾eme JavaScriptu, aby predstieral, Å¾e <code class=\"language-text\">Person</code> je konÅ¡truktorom triedy, <strong>a vytvorÃ­ prÃ¡zdny objekt, nastavÃ­ <code class=\"language-text\">this</code> na ten objekt, nastavÃ­ <code class=\"language-text\">this.name</code> a vrÃ¡tÃ­ ten upravenÃ½ objekt.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">var</span> jan <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'JÃ¡n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// RovnakÃ½ objekt, akÃ½ je `this` vo funkcii `Person`</span></code></pre></div>\n<p>TaktieÅ¾ operÃ¡tor <code class=\"language-text\">new</code> nastavÃ­ premennÃº <code class=\"language-text\">jan</code> tak, aby mal prÃ­stup k <code class=\"language-text\">Person.prototype</code>:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sayHi</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Ahoj, volÃ¡m sa '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span></span>\n<span class=\"token keyword\">var</span> jan <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'JÃ¡n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">jan<span class=\"token punctuation\">.</span><span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<p>Takto vÃ½vojÃ¡ri imitovali triedy, neÅ¾ boli podporovanÃ© samotnÃ½m JavaScriptom.</p>\n<hr>\n<p>TakÅ¾e operÃ¡tor <code class=\"language-text\">new</code> je v JavaScripte uÅ¾ nejakÃº dobu. Ale triedy samy o sebe sÃº novinkou. Pomocou nich mÃ´Å¾eme naznaÄiÅ¥ nÃ¡Å¡ zÃ¡mer:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Person</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Ahoj, volÃ¡m sa '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> jan <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'JÃ¡n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\njan<span class=\"token punctuation\">.</span><span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>KeÄ navrhujeme syntax a API, je dÃ´leÅ¾itÃ© myslieÅ¥ aj na to, ako by vedel vÃ½vojÃ¡r <em>naznaÄiÅ¥ zÃ¡mer kÃ³du</em>.</p>\n<p>Ak sa vytvorÃ­ funkcia, JavaScript nevie, Å¾e Äi je tÃ¡ funkcia jednoduchÃ¡ a mÃ¡ byÅ¥ iba spustenÃ¡ ako <code class=\"language-text\">alert()</code>, alebo Å¾e Äi je tÃ¡ funkcia v skutoÄnosti konÅ¡truktor triedy ako je <code class=\"language-text\">new Person()</code>. Ak niekto zabudne na slovÃ­Äko <code class=\"language-text\">new</code> pred funkciou ako je <code class=\"language-text\">Person</code>, mÃ´Å¾e to vyvolaÅ¥ zmÃ¤tok.</p>\n<p><strong>Syntaxou vieme naznaÄiÅ¥, Å¾e to nie je iba funkcia â€” ale trieda s konÅ¡truktorom.</strong> Ak zabudneme na slovÃ­Äko <code class=\"language-text\">new</code>, JavaScript sa bude sÅ¥aÅ¾ovaÅ¥:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">let</span> jan <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'JÃ¡n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// âœ… Ak je Person funkcia: funguje to</span>\n<span class=\"token comment\">// âœ… Ak je Person trieda: stÃ¡le to funguje</span>\n\n<span class=\"token keyword\">let</span> richard <span class=\"token operator\">=</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Richard'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Zabudli sme na `new`</span>\n<span class=\"token comment\">// ğŸ˜³ Ak je Person funkcia podobnÃ¡ triede: zmÃ¤tok</span>\n<span class=\"token comment\">// ğŸ”´ Ak je Person trieda: nebude to fungovaÅ¥</span></code></pre></div>\n<p>VÄaka tomu vieme zistiÅ¥ chyby skÃ´r, neÅ¾ narazÃ­me na nejakÃ½ divnÃ½ problÃ©m, kde <code class=\"language-text\">this.name</code> je v skutoÄnosti <code class=\"language-text\">window.name</code>, a nie <code class=\"language-text\">richard.name</code>.</p>\n<p>To znamenÃ¡, Å¾e React musÃ­ pouÅ¾iÅ¥ slovÃ­Äko <code class=\"language-text\">new</code> predtÃ½m, neÅ¾ vytvorÃ­ inÅ¡tanciu triedy. NemÃ´Å¾e ju pouÅ¾iÅ¥ ako obyÄajnÃº funkciu, pretoÅ¾e JavaScript by to bral ako chybu!</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Counter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Ahoj</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// ğŸ”´ To sa nesmie:</span>\n<span class=\"token keyword\">const</span> instance <span class=\"token operator\">=</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>To by bol prÃºser.</p>\n<hr>\n<p>PredtÃ½m, neÅ¾ sa pozrieme na to, ako to rieÅ¡i React, je dÃ´leÅ¾itÃ© vedieÅ¥, Å¾e vÃ¤ÄÅ¡ina Ä¾udÃ­ pouÅ¾Ã­va nÃ¡stroje, ako je Babel, aby mohli pouÅ¾Ã­vaÅ¥ modernÃ© funkcie v starÅ¡Ã­ch prehliadaÄoch. TakÅ¾e musÃ­me braÅ¥ do Ãºvahy aj kompilÃ¡tory.</p>\n<p>V prvÃ½ch verziÃ¡ch Babelu mohli byÅ¥ triedy spustenÃ© bez pouÅ¾itia <code class=\"language-text\">new</code>. Samozrejme, tÃ¡ chyba bola opravenÃ¡ â€” staÄilo pridaÅ¥ kÃ³d navyÅ¡e:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// SkrÃ¡tenÃ¡ verzia vÃ½stpnÃ©ho kÃ³du:</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TypeError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Cannot call a class as a function\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// \"NemoÅ¾no spustiÅ¥ triedu ako funkciu\"</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// NÃ¡Å¡ kÃ³d:</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'JÃ¡n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// âœ…</span>\n<span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Richard'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// ğŸ”´ Cannot call a class as a function</span></code></pre></div>\n<p>PodobnÃ½ kÃ³d ste mohli vidieÅ¥ aj vo vÃ½stupe kompilÃ¡tora. PrÃ¡ve to robÃ­ funkcia <code class=\"language-text\">_classCallCheck</code>. (MÃ´Å¾ete zmenÅ¡iÅ¥ veÄ¾kosÅ¥ vÃ½stupu pomocou voÄ¾nÃ©ho reÅ¾imu (loose mode), ktorÃ½ sÃ­ce nepridÃ¡va Å¾iadne kontroly, ale mÃ´Å¾e skomplikovaÅ¥ prechod na skutoÄnÃ© triedy.)</p>\n<hr>\n<p>Teraz by ste mali vedieÅ¥ rozdiel medzi pouÅ¾itÃ­m <code class=\"language-text\">new</code> a <em>ne</em>pouÅ¾itÃ­m <code class=\"language-text\">new</code>:</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th><code class=\"language-text\">new Person()</code></th>\n<th><code class=\"language-text\">Person()</code></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">class</code></td>\n<td>âœ… <code class=\"language-text\">this</code> je inÅ¡tancia objektu <code class=\"language-text\">Person</code></td>\n<td>ğŸ”´ <code class=\"language-text\">TypeError</code></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">function</code></td>\n<td>âœ… <code class=\"language-text\">this</code> je inÅ¡tancia objektu <code class=\"language-text\">Person</code></td>\n<td>ğŸ˜³ <code class=\"language-text\">this</code> je <code class=\"language-text\">window</code>/<code class=\"language-text\">undefined</code></td>\n</tr>\n</tbody>\n</table>\n<p>PrÃ¡ve preto je dÃ´leÅ¾itÃ©, aby React vedel spustiÅ¥ komponentu napriamo. <strong>Ak je vÃ¡Å¡a komponenta definovanÃ¡ ako trieda, React musÃ­ pred jej spustenÃ­m pouÅ¾iÅ¥ <code class=\"language-text\">new</code>.</strong></p>\n<p>Vie React zistiÅ¥, Å¾e Äi je nieÄo trieda alebo nie?</p>\n<p>Nie je to takÃ© jednoduchÃ©. Aj keÄ <a href=\"https://stackoverflow.com/questions/29093396/how-do-you-check-the-difference-between-an-ecmascript-6-class-and-function\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">v JavaScripte vieme rozlÃ­Å¡iÅ¥ triedu od funkcie</a>, nefunguje to pre triedy, ktorÃ© boli spracovanÃ© nÃ¡strojmi ako sÃº Babel. PrehliadaÄ si myslÃ­, Å¾e sÃº to obyÄajnÃ© funkcie. React mÃ¡ smolu.</p>\n<hr>\n<p>Dobre, mÃ´Å¾e React pouÅ¾Ã­vaÅ¥ <code class=\"language-text\">new</code> pred kaÅ¾dÃ½m spustenÃ­m? BohuÅ¾iaÄ¾, nie vÅ¾dy.</p>\n<p>KeÄ spustÃ­me obyÄajnÃº funkciu pomocou <code class=\"language-text\">new</code>, zÃ­skame inÅ¡tanciu objektu. To chceme pri funkciÃ¡ch, ktorÃ© sÃº v skutoÄnosti konÅ¡truktorom (akou je uÅ¾ spomÃ­nanÃ½ <code class=\"language-text\">Person</code>), ale bolo by to mÃ¤tÃºce v prÃ­pade komponentov, ktorÃ© sme definovali ako funkcie:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// NeoÄÃ¡kava sa, Å¾e tu bude `this` nejakou inÅ¡tanciou</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Ahoj</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Aj to by sa eÅ¡te dalo tolerovaÅ¥. Ale existujÃº <em>ÄalÅ¡ie</em> dva dÃ´vody, preÄo to nie je dobrÃ½ nÃ¡pad.</p>\n<hr>\n<p>PrvÃ½m dÃ´vodom je, Å¾e by operÃ¡tor <code class=\"language-text\">new</code> nefungoval v skutoÄnÃ½ch skrÃ¡tenÃ½ch funkciÃ¡ch (nie tie, ktorÃ© boli kompilovanÃ© Babelom). Ich spustenie s operÃ¡torom <code class=\"language-text\">new</code> vyhodÃ­ chybu:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Greeting</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Ahoj</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ğŸ”´ Greeting is not a constructor (\"Greeting nie je konÅ¡truktor\")</span></code></pre></div>\n<p>To nie je chyba, ale vlastnosÅ¥ skrÃ¡tenÃ½ch funkciÃ­. Jednou z vÃ½hod skrÃ¡tenÃ½ch funkciÃ­ je, Å¾e nemÃ¡ svoje vlastnÃ© <code class=\"language-text\">this</code> â€” namiesto toho preberÃ¡ <code class=\"language-text\">this</code> od jej najbliÅ¾Å¡ej funkcie:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Friends</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>    <span class=\"token keyword\">const</span> friends <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friends<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> friends<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">friend</span> <span class=\"token operator\">=></span>\n      <span class=\"token operator\">&lt;</span>Friend\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token comment\">// `this` je z metÃ³dy `render`</span></span><span class=\"gatsby-highlight-code-line\">        size<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">}</span></span>        name<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>friend<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span>\n        key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Dobre, takÅ¾e <strong>skrÃ¡tenÃ© funkcie nemajÃº svoje vlastnÃ© <code class=\"language-text\">this</code>.</strong> To ale znamenÃ¡, Å¾e sÃº nepouÅ¾iteÄ¾nÃ© ako konÅ¡truktor!</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Person</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ğŸ”´ To nedÃ¡va zmysel!</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>PrÃ¡ve preto <strong>JavaScript nedovolÃ­ spustenie skrÃ¡tenej funkcie so slovÃ­Äkom <code class=\"language-text\">new</code>.</strong> Ak sa to stane, je Å¡anca, Å¾e uÅ¾ ste aj tak spravili chybu, a je najlepÅ¡ie sa o chybÃ¡ch dozvedieÅ¥ Äo najskÃ´r. Z podobnÃ©ho dÃ´vodu JavaScript nedovolÃ­ spustiÅ¥ triedu <em>bez</em> <code class=\"language-text\">new</code>.</p>\n<p>SkvelÃ©, ale to nÃ¡m kazÃ­ plÃ¡ny. React nemÃ´Å¾e pouÅ¾Ã­vaÅ¥ <code class=\"language-text\">new</code> na vÅ¡etko, pretoÅ¾e potom nemÃ´Å¾eme pouÅ¾Ã­vaÅ¥ skrÃ¡tenÃ© funkcie! Aj keÄ vieme zistiÅ¥, Å¾e Äi je nejakÃ¡ funkcia skrÃ¡tenÃ¡, lebo ony nemajÃº <code class=\"language-text\">prototype</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// undefined</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// {constructor: f}</span></code></pre></div>\n<p>Ale to <a href=\"https://github.com/facebook/react/issues/4599#issuecomment-136562930\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">nebude fungovaÅ¥</a> pre funkcie skompilovanÃ© pomocou nÃ¡strojov ako je Babel. Aj keÄ to nie je aÅ¾ takÃ½ problÃ©m, je aj ÄalÅ¡Ã­ dÃ´vod, preÄo to React nemÃ´Å¾e robiÅ¥.</p>\n<hr>\n<p>PoslednÃ½m dÃ´vodom je, Å¾e by React nemohol podporovaÅ¥ komponenty, ktorÃ© vracajÃº reÅ¥azce alebo inÃ© jednoduchÃ© hodnoty.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token string\">'Ahoj'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// âœ… 'Ahoj'</span>\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ğŸ˜³ Greeting {}</span></code></pre></div>\n<p>A to je kvÃ´li tomu, lebo <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">operÃ¡tor <code class=\"language-text\">new</code></a> vytvÃ¡ra objekt, ktorÃ½ bude vo funkcii ako <code class=\"language-text\">this</code>, a vracia nÃ¡m ten objekt.</p>\n<p>AvÅ¡ak funkcia, ktorÃ¡ bola spustenÃ¡ pomocou <code class=\"language-text\">new</code> mÃ´Å¾e <em>urÄiÅ¥</em> objekt, ktorÃ½ bude vo funkcii definovanÃ½ ako <code class=\"language-text\">this</code>. Je to uÅ¾itoÄnÃ© v prÃ­padoch ako je â€œpooling,â€ kde jeden objekt mÃ´Å¾e byÅ¥ pouÅ¾itÃ½ viackrÃ¡t.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// Hodnota bude nastavenÃ¡ neskÃ´r</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">var</span> zeroVector <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Vector</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> y <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>zeroVector <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// PouÅ¾i uÅ¾ vytvorenÃº objekt</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> zeroVector<span class=\"token punctuation\">;</span></span>    <span class=\"token punctuation\">}</span>\n    zeroVector <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> x<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> y<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">var</span> b <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">var</span> c <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ğŸ˜² b === c</span></span></code></pre></div>\n<p>Ale <code class=\"language-text\">new</code> <em>ignoruje</em> vrÃ¡tenÃº hodnotu, ak tÃ¡ hodnota <em>nie</em> je objektom. Ak funkcia vrÃ¡ti reÅ¥azec alebo ÄÃ­slo, <code class=\"language-text\">new</code> sa tvÃ¡ri, ako keby funkcia nevrÃ¡tila niÄ.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Answer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">42</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">Answer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// âœ… 42</span>\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Answer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ğŸ˜³ Answer {}</span></code></pre></div>\n<p>Neexistuje Å¾iaden spÃ´sob, ako zÃ­skaÅ¥ jednoduchÃº hodnotu (ako je ÄÃ­slo alebo reÅ¥azec) z funkcie, ktorÃ¡ bola spustenÃ¡ pomocou <code class=\"language-text\">new</code>. TakÅ¾e ak React by stÃ¡le pouÅ¾Ã­valÂ <code class=\"language-text\">new</code>, nemohol by pridaÅ¥ podporu pre komponenty, ktorÃ© vracajÃº reÅ¥azce.</p>\n<p>To nie je prijateÄ¾nÃ© a prÃ¡ve preto potrebujeme nÃ¡jsÅ¥ kompromis.</p>\n<hr>\n<p>ÄŒo sme sa teda nauÄili? React potrebuje spustiÅ¥ triedy (vrÃ¡tane vÃ½stupu z Babelu) <em>pomocou</em> <code class=\"language-text\">new</code>, ale funkcie, Äi obyÄajnÃ© alebo skrÃ¡tene, <em>bez</em> <code class=\"language-text\">new</code>. A neexistuje Å¾iaden spoÄ¾ahlivÃ½ spÃ´sob, ako ich rozlÃ­Å¡iÅ¥.</p>\n<p><strong>Ak teda nevieme vyrieÅ¡iÅ¥ vÅ¡eobecnÃ½ problÃ©m, Äo tak vyrieÅ¡iÅ¥ nejakÃ½ Å¡pecifickÃ½?</strong></p>\n<p>Ak definujete komponentu ako triedu, je Å¡anca, Å¾e kvÃ´li metÃ³dam ako jeÂ <code class=\"language-text\">this.setState()</code> rozÅ¡Ã­rite celÃº triedu <code class=\"language-text\">React.Component</code>. <strong>ÄŒo keby namiesto toho, aby sme skÃºÅ¡ali zistiÅ¥, Å¾e Äi je nieÄo trieda, by sme zisÅ¥ovali, Å¾e Äi komponent rozÅ¡iruje <code class=\"language-text\">React.Component</code>?</strong></p>\n<p>Spoiler: prÃ¡ve to React robÃ­.</p>\n<hr>\n<p>NajlepÅ¡Ã­m spÃ´sobom, ako zistiÅ¥, Å¾e Äi je <code class=\"language-text\">Greeting</code> React komponenta vytvorenÃ¡ pomocou triedy je, Å¾e Äi <code class=\"language-text\">Greeting.prototype instanceof React.Component</code> vracia <code class=\"language-text\">true</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">A</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">B</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">A</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">B</span><span class=\"token punctuation\">.</span>prototype <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">A</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code></pre></div>\n<p>Viem, Äo si prÃ¡ve myslÃ­te. ÄŒo sa to prÃ¡ve deje?! Aby bola odpoveÄ jasnÃ¡, potrebujeme pochopiÅ¥, ako fungujÃº prototypy v JavaScripte.</p>\n<p>UrÄite ste poÄuli o â€œsieti prototypov.â€ KaÅ¾dÃ½ objekt v JavaScripte mÃ¡ svoj â€œprototyp.â€ KeÄ napÃ­Å¡eme <code class=\"language-text\">jan.sayHi()</code>, ale <code class=\"language-text\">jan</code> nemÃ¡ vlastnosÅ¥ <code class=\"language-text\">sayHi</code>, budeme ju hladaÅ¥ v prototype objektu <code class=\"language-text\">jan</code>. Ak ju nenÃ¡jdeme ani tam, pozrieme sa na ÄalÅ¡Ã­ prototyp v sieti â€” prototyp prototypu objektu <code class=\"language-text\">jan</code>. A tak Äalej.</p>\n<p><strong>AvÅ¡ak vlastnosÅ¥ <code class=\"language-text\">prototype</code> <em>nie je</em> prototypom triedy alebo funkcie.</strong> Nie, nerobÃ­m si srandu.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ğŸ¤ª Nie je prototyp objektu Person</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Person<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ğŸ˜³ Prototyp objektu Person</span></code></pre></div>\n<p>TakÅ¾e tÃ¡ â€œsieÅ¥ prototypovâ€ je skÃ´r <code class=\"language-text\">__proto__.__proto__.__proto__</code>, neÅ¾ <code class=\"language-text\">prototype.prototype.prototype</code>. Trvalo mi to niekoÄ¾ko rokov, neÅ¾ som to pochopil.</p>\n<p>ÄŒo znamenÃ¡ vo funkcii alebo v triede vlastnosÅ¥ <code class=\"language-text\">prototype</code>? <strong>Je to vlastne vlastnosÅ¥, ktorÃ¡ je v inicializovanÃ½ch objektoch nastavenÃ¡ ako <code class=\"language-text\">__proto__</code>!</strong></p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sayHi</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Ahoj, volÃ¡m sa '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">var</span> jan <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'JÃ¡n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// NastavÃ­ `jan.__proto__` na `Person.prototype`</span></span></code></pre></div>\n<p>JavaScript zÃ­skava vlastnosti prÃ¡ve cez <code class=\"language-text\">__proto__</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">jan<span class=\"token punctuation\">.</span><span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 1. MÃ¡ jan vlastnosÅ¥ sayHi? Nie.</span>\n<span class=\"token comment\">// 2. MÃ¡ jan.__proto__ vlastnosÅ¥ sayHi? Ãno. Spusti ju!</span>\n\njan<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 1. MÃ¡ jan vlastnosÅ¥ toString? Nie.</span>\n<span class=\"token comment\">// 2. MÃ¡ jan.__proto__ vlastnosÅ¥ toString? Nie.</span>\n<span class=\"token comment\">// 3. MÃ¡ jan.__proto__.__proto__ vlastnosÅ¥ toString? Ãno. Spusti ju!</span></code></pre></div>\n<p>V skutoÄnosti by ste nemali pouÅ¾Ã­vaÅ¥ <code class=\"language-text\">__proto__</code>. Jedine ak hÄ¾adÃ¡te nejakÃº chybu, ktorÃ¡ sÃºvisÃ­ so sieÅ¥ou prototypov. Ak chcete maÅ¥ nejakÃ© vlastnosti v <code class=\"language-text\">jan.__proto__</code>, mali by byÅ¥ v <code class=\"language-text\">Person.prototype</code>. AspoÅˆ to tak bolo pÃ´vodne myslenÃ©.</p>\n<p>VlastnosÅ¥ <code class=\"language-text\">__proto__</code> vlastne nemala byÅ¥ dostupnÃ¡ pouÅ¾Ã­vateÄ¾om, pretoÅ¾e sieÅ¥ prototypov bol povaÅ¾ovanÃ½ za vnÃºtornÃ½ koncept. Ale niektorÃ© prehliadaÄe pridali pre Åˆu podporu a vlastnosÅ¥ bola Å¡tandardizovanÃ¡. (Ale je povaÅ¾ovanÃ¡ za zastaralÃº, a mala by sa pouÅ¾Ã­vaÅ¥ funkcia <code class=\"language-text\">Object.getPrototypeOf()</code>.)</p>\n<p><strong>StÃ¡le nechÃ¡pem preÄo vlastnosÅ¥, ktorÃ¡ sa nazÃ½va <code class=\"language-text\">prototype</code> nevracia prototyp danej hodnoty</strong> (v tomto prÃ­pade <code class=\"language-text\">jan.prototype</code> nie je definovanÃ½, pretoÅ¾e <code class=\"language-text\">jan</code> nie je funkcia). Ja si myslÃ­m, Å¾e toto je najvÃ¤ÄÅ¡Ã­m dÃ´vodom preÄo aj vÃ¤ÄÅ¡ina skÃºsenÃ½ch vÃ½vojÃ¡rov nerozumie prototypom v JavaScripte.</p>\n<hr>\n<p>Ten prÃ­spevok je ale dlhÃ½. Ale uÅ¾ sme na konci. To dÃ¡te.</p>\n<p>KeÄ spustÃ­me <code class=\"language-text\">obj.foo</code>, JavaScript bude hÄ¾adaÅ¥ <code class=\"language-text\">foo</code> v premennÃ½ch <code class=\"language-text\">obj</code>, <code class=\"language-text\">obj.__proto</code>, <code class=\"language-text\">obj.__proto__.__proto__</code>, a tak Äalej.</p>\n<p>Aj keÄ sa pomocou tried priamo nepripÃ¡jate do siete, <code class=\"language-text\">extends</code> vo vnÃºtri stÃ¡le funguje na starej znÃ¡mej sieti prototypov. VÄaka tomu mÃ¡ komponenta v Reacte, ktorÃ¡ bola vytvorenÃ¡ pomocou triedy prÃ­stup k metÃ³dam ako je <code class=\"language-text\">setState</code>:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Greeting</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span></span>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Ahoj</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> c <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Greeting.prototype</span>\n<span class=\"gatsby-highlight-code-line\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// React.Component.prototype</span></span>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Object.prototype</span>\n\nc<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">// NÃ¡jdenÃ© v c.__proto__ (Greeting.prototype)</span>\n<span class=\"gatsby-highlight-code-line\">c<span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">// NÃ¡jdenÃ© v c.__proto__.__proto__ (React.Component.prototype)</span></span>c<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">// NÃ¡jdenÃ© v c.__proto__.__proto__.__proto__ (Object.prototype)</span></code></pre></div>\n<p>InÃ½mi slovami, <strong>hierarchia triedy je podobnÃ¡ sieti prototypov:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// sieÅ¥ rozÅ¡irovania triedy cez `extends`</span>\nGreeting\n  â†’ React<span class=\"token punctuation\">.</span>Component\n    â†’ <span class=\"token function\">Object</span> <span class=\"token punctuation\">(</span>implicitly<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// sieÅ¥ prototypov</span>\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  â†’ <span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">.</span>prototype\n    â†’ React<span class=\"token punctuation\">.</span><span class=\"token class-name\">Component</span><span class=\"token punctuation\">.</span>prototype\n      â†’ <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype</code></pre></div>\n<hr>\n<p>PretoÅ¾e sieÅ¥ prototypov odzrkadÄ¾uje hierarchiu tried, mÃ¡me moÅ¾nosÅ¥ zistiÅ¥, Å¾e Äi <code class=\"language-text\">Greeting</code> rozÅ¡iruje <code class=\"language-text\">React.Component</code> tak, Å¾e zaÄneme od <code class=\"language-text\">Greeting.prototype</code> a pokraÄujeme cez sieÅ¥ prototypov:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// `__proto__` chain</span>\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"gatsby-highlight-code-line\">  â†’ <span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// ğŸ•µï¸ ZaÄÃ­name</span></span><span class=\"gatsby-highlight-code-line\">    â†’ React<span class=\"token punctuation\">.</span><span class=\"token class-name\">Component</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// âœ… Tu je!</span></span>      â†’ <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype</code></pre></div>\n<p>NaÅ¡Å¥astie, <code class=\"language-text\">x instanceof Y</code> robÃ­ presne to istÃ©. HÄ¾adÃ¡ <code class=\"language-text\">Y.prototype</code> v sieti prototypov <code class=\"language-text\">x.__proto__</code>.</p>\n<p>ObyÄajne sa ten kÃ³d pouÅ¾Ã­va na to, aby sa zistilo, Å¾e Äi je nieÄo inÅ¡tanciou triedy:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">let</span> greeting <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>greeting <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token comment\">// greeting (ğŸ•µï¸â€ ZaÄÃ­name)</span>\n<span class=\"token comment\">//   .__proto__ â†’ Greeting.prototype (âœ… Tu je!)</span>\n<span class=\"token comment\">//     .__proto__ â†’ React.Component.prototype </span>\n<span class=\"token comment\">//       .__proto__ â†’ Object.prototype</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>greeting <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token comment\">// greeting (ğŸ•µï¸â€ ZaÄÃ­name)</span>\n<span class=\"token comment\">//   .__proto__ â†’ Greeting.prototype</span>\n<span class=\"token comment\">//     .__proto__ â†’ React.Component.prototype (âœ… Tu je!)</span>\n<span class=\"token comment\">//       .__proto__ â†’ Object.prototype</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>greeting <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token comment\">// greeting (ğŸ•µï¸â€ ZaÄÃ­name)</span>\n<span class=\"token comment\">//   .__proto__ â†’ Greeting.prototype</span>\n<span class=\"token comment\">//     .__proto__ â†’ React.Component.prototype</span>\n<span class=\"token comment\">//       .__proto__ â†’ Object.prototype (âœ… Tu je!)</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>greeting <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Banana</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token comment\">// greeting (ğŸ•µï¸â€ ZaÄÃ­name)</span>\n<span class=\"token comment\">//   .__proto__ â†’ Greeting.prototype</span>\n<span class=\"token comment\">//     .__proto__ â†’ React.Component.prototype </span>\n<span class=\"token comment\">//       .__proto__ â†’ Object.prototype (ğŸ™…â€ NenaÅ¡li sme!)</span></code></pre></div>\n<p>Ale funguje aj v prÃ­padoch, keÄ chceme zistiÅ¥, Å¾e Äi trieda rozÅ¡iruje inÃº triedu:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">.</span>prototype <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// greeting</span>\n<span class=\"token comment\">//   .__proto__ â†’ Greeting.prototype (ğŸ•µï¸â€ ZaÄÃ­name)</span>\n<span class=\"token comment\">//     .__proto__ â†’ React.Component.prototype (âœ… Tu je!)</span>\n<span class=\"token comment\">//       .__proto__ â†’ Object.prototype</span></code></pre></div>\n<p>A takto vieme zistiÅ¥, Å¾e Äi je React komponenta trieda alebo obyÄajnÃ¡ funkcia.</p>\n<hr>\n<p>Dobre, v skutoÄnosti React nepouÅ¾Ã­va toto rieÅ¡enie. ğŸ˜³</p>\n<p>ProblÃ©m s takÃ½mto rieÅ¡enÃ­m je, Å¾e nefunguje ak je na strÃ¡nke viac verziÃ­ Reactu, a komponenta, ktorÃº kontrolujeme, rozÅ¡iruje <code class=\"language-text\">React.Component</code> <em>inej</em> verzie Reactu. Nie je dobrÃ© mieÅ¡aÅ¥ viacero verziÃ­ Reactu z rÃ´znych dÃ´vodov, ale snaÅ¾Ã­me sa vyhnÃºÅ¥ Äo najviac moÅ¾nÃ½m chybÃ¡m. (S funkciou Hooks ale budeme ale musieÅ¥ <a href=\"https://github.com/facebook/react/issues/13991\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">vynÃºtiÅ¥ pouÅ¾Ã­vanie iba jednej verzie</a>)</p>\n<p>Mohli by sme skontrolovaÅ¥, Å¾e Äi je v prototype metÃ³da <code class=\"language-text\">render</code>. Ale vtedy <a href=\"https://github.com/facebook/react/issues/4599#issuecomment-129714112\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">nebolo jasnÃ©</a>, Å¾e ako sa vyvinie API komponentu. KaÅ¾dÃ¡ kontrola stojÃ­ nieÄo, a nechceli sme pridÃ¡vaÅ¥ viac ako jednu. TaktieÅ¾ by to nefungovalo, ak je metÃ³da <code class=\"language-text\">render</code> definovanÃ¡ ako metÃ³da inÅ¡tancie, ako je v prÃ­pade kÃ³du s vlastnosÅ¥ami triedy.</p>\n<p>Namiesto toho React <a href=\"https://github.com/facebook/react/pull/4663\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">pridal</a> znaÄku do zÃ¡kladnej triedy. React skontroluje, Å¾e Äi tÃ¡ komponenta mÃ¡ znaÄku, a tak React vie, Å¾e Äi je nieÄo React komponenta definovanÃ¡ pomocou triedy alebo nie.</p>\n<p>Najprv bola tÃ¡ znaÄka v samotnej triede <code class=\"language-text\">React.Component</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Vo vnÃºtri Reactu</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\nComponent<span class=\"token punctuation\">.</span>isReactClass <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Takto mÃ´Å¾eme skontrolovaÅ¥ jej existenciu</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Greeting</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Greeting<span class=\"token punctuation\">.</span>isReactClass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// âœ… Ãno</span></code></pre></div>\n<p>AvÅ¡ak niektorÃ© implementÃ¡cie, na ktorÃ© sme mysleli, <a href=\"https://github.com/scala-js/scala-js/issues/1900\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">nekopÃ­rovali</a> statickÃ© vlastnosti (alebo nenastavovali <code class=\"language-text\">__proto__</code>), takÅ¾e tÃ¡ znaÄka zaÄala miznÃºÅ¥.</p>\n<p>To je dÃ´vod, preÄo v Reacte bola tÃ¡to znaÄka <a href=\"https://github.com/facebook/react/pull/5021\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">presunutÃ¡</a> do <code class=\"language-text\">React.Component.prototype</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Vo vnÃºtri Reactu</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token class-name\">Component</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>isReactComponent <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Takto mÃ´Å¾eme skontrolovaÅ¥ jej existenciu</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Greeting</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>isReactComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// âœ… Ãno</span></code></pre></div>\n<p><strong>A to je doslova vÅ¡etko.</strong></p>\n<p>MoÅ¾no premÃ½Å¡Ä¾ate nad tÃ½m, Å¾e preÄo je tÃ¡to vlastnosÅ¥ objektom, a nie binÃ¡rnou hodnotou. V skutoÄnosti je to jedno, ale v skorÅ¡Ã­ch verziÃ¡ch testovacieho frameworku Jest (predtÃ½m, neÅ¾ bol Jest vÃ´bec dobrÃ½â„¢) bolo automatickÃ© simulovanie objektov automaticky zapnutÃ©. SimulovanÃ© objekty nemali v sebe vlastnosti s jednoduchÃ½mi hodnotami, <a href=\"https://github.com/facebook/react/pull/4663#issuecomment-136533373\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">a tak tÃ¡ kontrola nefungovala vÃ´bec</a>. DÃ­ky, Jest.</p>\n<p>V Reacte sa tÃ¡to kontrola <a href=\"https://github.com/facebook/react/blob/769b1f270e1251d9dbdce0fcbd9e92e502d059b8/packages/react-reconciler/src/ReactFiber.js#L297-L300\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">pouÅ¾Ã­va doteraz</a>.</p>\n<p>Ak nerozÅ¡Ã­rite <code class=\"language-text\">React.Component</code>, v prototype nebude <code class=\"language-text\">isReactComponent</code>, a nebude si myslieÅ¥, Å¾e tÃ¡to komponenta je definovanÃ¡ pomocou triedy. Teraz viete, preÄo rieÅ¡enie na chybu <code class=\"language-text\">Cannot call a class as a function</code> je pouÅ¾iÅ¥ <code class=\"language-text\">extends React.Component</code>. <a href=\"https://stackoverflow.com/a/42680526/458193\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">TÃ¡to odpoveÄ mÃ¡ v Stack Overflow najviac hlasov.</a> Nakoniec bolo <a href=\"https://github.com/facebook/react/pull/11168\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">pridanÃ© upozornenie</a>, ktorÃ© sa objavÃ­, ak existuje <code class=\"language-text\">prototype.render</code>, ale nie <code class=\"language-text\">prototype.isReactComponent</code>.</p>\n<hr>\n<p>MoÅ¾no si myslÃ­te, Å¾e tÃ½m prÃ­behom som vÃ¡s nejako oklamal. <strong>V skutoÄnosti je to rieÅ¡enie dosÅ¥ jednoduchÃ©, ale taktieÅ¾ som vÃ¡m vysvetlil <em>preÄo</em> React pouÅ¾Ã­va takÃ©to rieÅ¡enie, a akÃ© boli inÃ© moÅ¾nosti.</strong></p>\n<p>PodÄ¾a vlastnÃ½ch skÃºsenosti vÃ¡m viem povedaÅ¥, Å¾e toto je stÃ¡ly problÃ©m s API kniÅ¾nÃ­c. Aby sa API pouÅ¾Ã­valo jednoducho, taktieÅ¾ potrebujete myslieÅ¥ na rÃ´zne vlastnosti jazyka (alebo jazykov, vrÃ¡tane ich vÃ­zie), ich vÃ½kon, â€œergonÃ³miuâ€ pouÅ¾Ã­vania bez aj s kompilÃ¡ciou, stav ekosystÃ©mu a rÃ´znych rieÅ¡enÃ­ systÃ©mov na inÅ¡talÃ¡ciu zÃ¡vislostÃ­, skorÃ© upozornenia, atÄ. KoneÄnÃ½ vÃ½sledok nemusÃ­ byÅ¥ vÅ¾dy elegantnÃ½, ale musÃ­ byÅ¥ praktickÃ½.</p>\n<p><strong>Aby bolo koneÄnÃ© API ÃºspeÅ¡nÃ©, <em>uÅ¾Ã­vatelia</em> nemusia myslieÅ¥ na ten proces.</strong> Namiesto toho mÃ´Å¾u tvoriÅ¥ aplikÃ¡cie.</p>\n<p>Ale ak ste zvedavÃ½â€¦ je dobrÃ© vedieÅ¥, ako to funguje.</p>","timeToRead":15,"frontmatter":{"title":"Ako vie React rozoznaÅ¥ triedu od funkcie?","date":"December 02, 2018","spoiler":"V tomto ÄlÃ¡nku hovorÃ­m o triedach, new, instanceof, sieti prototypov, a dizajne API.","cta":null},"fields":{"slug":"/sk/how-does-react-tell-a-class-from-a-function/","langKey":"sk"}}},"pageContext":{"slug":"/sk/how-does-react-tell-a-class-from-a-function/","translations":["es","fr","hu","ja","nl","pt-br","sk","zh-hans","zh-hant"],"translatedLinks":["/why-do-we-write-super-props/"]}}}