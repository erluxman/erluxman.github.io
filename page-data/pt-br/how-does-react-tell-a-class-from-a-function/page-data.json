{"componentChunkName":"component---src-templates-blog-post-js","path":"/pt-br/how-does-react-tell-a-class-from-a-function/","result":{"data":{"site":{"siteMetadata":{"title":"Overreacted","author":"Dan Abramov"}},"markdownRemark":{"id":"1fa30051-d4be-5e33-8aa0-662aa288320e","html":"<p>Considere o componente <code class=\"language-text\">Greeting</code>, escrito como uma fun√ß√£o:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>O React tamb√©m permite escrev√™-lo como uma classe:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Greeting</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>(At√© <a href=\"https://reactjs.org/docs/hooks-intro.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">recentemente</a>, essa era a √∫nica forma de usar <em>features</em> como o state.)</p>\n<p>Quando voc√™ deseja renderizar o componente <code class=\"language-text\">&lt;Greeting /&gt;</code>, o modo como ele foi implementado n√£o interessa:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Classe ou fun√ß√£o ‚Äî tanto faz.</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Greeting</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>Por√©m, o <em>pr√≥prio React</em> se importa com essa diferen√ßa!</p>\n<p>Se <code class=\"language-text\">Greeting</code> √© uma fun√ß√£o, o React precisa cham√°-lo:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Seu C√≥digo</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Dentro do React</span>\n<span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token function\">Greeting</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// &lt;p>Hello&lt;/p></span></code></pre></div>\n<p>Mas se <code class=\"language-text\">Greeting</code> for uma classe, o React precisa instanciar ele com um operador <code class=\"language-text\">new</code> e <em>ent√£o</em> chamar o m√©todo <code class=\"language-text\">render</code> na inst√¢ncia criada:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Seu c√≥digo</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Greeting</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Dentro do React</span>\n<span class=\"token keyword\">const</span> instance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Greeting {}</span>\n<span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> instance<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// &lt;p>Hello&lt;/p></span></code></pre></div>\n<p>Em ambos os casos, o objetivo do React √© conseguir que o n√≥ seja renderizado (no caso o <code class=\"language-text\">&lt;p&gt;Hello&lt;/p&gt;</code>). Mas os passos para tal dependem de como <code class=\"language-text\">Greeting</code> foi definido.</p>\n<p><strong>Ent√£o como o React sabe que uma coisa √© uma classe ou uma fun√ß√£o?</strong></p>\n<p>Assim como no meu <a href=\"/why-do-we-write-super-props/\">post anterior</a>, <strong>voc√™ n√£o <em>precisa</em> saber isso para ser produtivo no React.</strong> Eu mesmo n√£o sabia durante anos. Por favor, n√£o fa√ßa isso virar uma pergunta de entrevista. Na realidade, esse post √© mais sobre JavaScript do que de React.</p>\n<p>Esse blog √© para leitores curiosos que querem saber <em>como</em> o React funciona de certa forma. Voc√™ √© esta pessoa? Ent√£o vamos mergulhar juntos.</p>\n<p><strong>Essa √© uma longa jornada. Prepare-se. Esse post n√£o tem muita informa√ß√£o sobre o React, mas vamos passar por aspectos como o <code class=\"language-text\">new</code>, o <code class=\"language-text\">this</code>, classes, arrow functions, <code class=\"language-text\">prototype</code>, <code class=\"language-text\">__proto__</code>, <code class=\"language-text\">instanceof</code>, e como essas coisas funcionam junto no JavaScript. Por sorte, voc√™ n√£o precisa pensar tanto sobre elas enquanto <em>usa</em> o React. J√° se voc√™ estiver implementando o React‚Ä¶</strong></p>\n<p>(Se voc√™ quer apenas saber a resposta, d√™ um scroll at√© o final.)</p>\n<hr>\n<p>Primeiramente, precisamos definir o que √© importante para tratar fun√ß√µs e classes de forma diferente. Note que usamos o operador <code class=\"language-text\">new</code> quando chamamos uma classe:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Se Greeting √© uma fun√ß√£o</span>\n<span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token function\">Greeting</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// &lt;p>Hello&lt;/p></span>\n\n<span class=\"token comment\">// Se Greeting √© uma classe</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> instance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Greeting {}</span></span><span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> instance<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// &lt;p>Hello&lt;/p></span></code></pre></div>\n<p>Vamos pegar uma no√ß√£o do que esse <code class=\"language-text\">new</code> faz no JavaScript.</p>\n<hr>\n<p>Nos velhos tempos, o JavaScript n√£o tinha classes. Por√©m, era poss√≠vel se expressar de forma similar usando apenas fun√ß√µes. <strong>De forma concreta, voc√™ pode usar <em>qualquer</em> fun√ß√£o de forma similar √† um construtor de uma classe, adicionando um <code class=\"language-text\">new</code> antes da sua chamada:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Apenas uma fun√ß√£o</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> fred <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Fred'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ‚úÖ Person {name: 'Fred'}</span>\n<span class=\"token keyword\">var</span> george <span class=\"token operator\">=</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'George'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// üî¥ N√£o Funciona</span></code></pre></div>\n<p>Voc√™ ainda pode escrever c√≥digos como esse hoje em dia! Tente isso nos DevTools do navegador.</p>\n<p>Se voc√™ chamou <code class=\"language-text\">Person(&#39;Fred&#39;)</code> <strong>sem</strong> o <code class=\"language-text\">new</code>, o <code class=\"language-text\">this</code> de dentro deve apontar para alguma coisa global e in√∫til (por exemplo, <code class=\"language-text\">window</code> ou <code class=\"language-text\">undefined</code>). Assim, o seu c√≥digo iria quebrar ou fazer alguma coisas idiota como definir <code class=\"language-text\">window.name</code>.</p>\n<p>Adicionando <code class=\"language-text\">new</code> antes da chamada, falamos: ‚ÄúOu JavaScript, eu sei que <code class=\"language-text\">Person</code> √© s√≥ uma fun√ß√£o, mas vamos fazer de conta que √© o construtor de uma classe‚Äù. <strong>Crie um objeto <code class=\"language-text\">{}</code> e aponte o <code class=\"language-text\">this</code> dentro da fun√ß√£o <code class=\"language-text\">Person</code> para o objeto criado, para conseguir definir coisas como <code class=\"language-text\">this.name</code>. Depois devolva esse objeto para mim.</strong>‚Äù</p>\n<p>Isso √© o que o operador <code class=\"language-text\">new</code> faz.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">var</span> fred <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Fred'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Mesmo objeto que o `this` dentro de `Person`</span></code></pre></div>\n<p>O operador <code class=\"language-text\">new</code> tamb√©m faz qualquer coisa que colocamos em <code class=\"language-text\">Person.prototype</code> esteja dispon√≠vel no objeto <code class=\"language-text\">fred</code>:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sayHi</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hi, I am '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span></span>\n<span class=\"token keyword\">var</span> fred <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Fred'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">fred<span class=\"token punctuation\">.</span><span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<p>Essa √© a forma que as pessoas emulavam classes antes que as mesmas fossem adicionadas no JavaScript.</p>\n<hr>\n<p>Ent√£o o <code class=\"language-text\">new</code> j√° estava presente no JavaScript por um tempo. Por√©m classes s√£o mais recentes. Elas nos permitem reescrever o c√≥digo anterior, para se adequar mais com a nossa inten√ß√£o:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Person</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hi, I am '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> fred <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Fred'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nfred<span class=\"token punctuation\">.</span><span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><em>Capturar a inten√ß√£o do desenvolvedor</em> √© importante no design da API de qualquer linguagem.</p>\n<p>Se voc√™ escreve uma fun√ß√£o, o JavaScript n√£o consegue adivinhar se ela deveria ser chamada como <code class=\"language-text\">alert()</code> ou se deveria funcionar como um construtor do tipo <code class=\"language-text\">new Person()</code>. Esquecer de especificar o <code class=\"language-text\">new</code> para uma fun√ß√£o como <code class=\"language-text\">Person</code> poderia levar a comportamentos confusos.</p>\n<p><strong>A sintaxe de classe nos diz: ‚ÄúIsso n√£o √© apenas uma fun√ß√£o - √© uma classe e ela tem um construtor‚Äù.</strong> Se voc√™ esquecer do <code class=\"language-text\">new</code> quando for chamar ela, o JavaScript vai retornar um erro:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">let</span> fred <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Fred'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ‚úÖ  Se Person for uma fun√ß√£o: funciona</span>\n<span class=\"token comment\">// ‚úÖ  Se Person for uma classe: funciona tamb√©m</span>\n\n<span class=\"token keyword\">let</span> george <span class=\"token operator\">=</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'George'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Esquecemos do `new`</span>\n<span class=\"token comment\">// üò≥ Se Person for uma fun√ß√£o do tipo construtor: comportamento confuso</span>\n<span class=\"token comment\">// üî¥ Se Person for uma classe: falha na hora</span></code></pre></div>\n<p>Isso nos ajuda a achar erros no come√ßo, ao inv√©s de esperar a ocorr√™ncia de um bug obscuro, do tipo <code class=\"language-text\">this.name</code> sendo tratado como <code class=\"language-text\">window.name</code> em vez de <code class=\"language-text\">george.name</code>.</p>\n<p>Por√©m, isso significa que o React precisa colocar o <code class=\"language-text\">new</code> antes de chamar qualquer classe. Elas n√£o poderiam ser tratadas como fun√ß√µes regulares, pois o JavaScript retornaria um erro!</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Counter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// üî¥ O React n√£o pode fazer isso:</span>\n<span class=\"token keyword\">const</span> instance <span class=\"token operator\">=</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Isso cheira √† confus√£o.</p>\n<hr>\n<p>Antes de ver como o React resolve isso, √© importante lembrar que muitas pessoas que usam o React, usam compiladores como o Babel para compilar <em>features</em> modernas como <em>classes</em> para navegadores antigos. Ent√£o devemos considerar compiladores no nosso design.</p>\n<p>Em vers√µes antigas do Babel, classes poderiam ser chamadas sem o <code class=\"language-text\">new</code>. Por√©m, isso foi arrumado - adicionando mais c√≥digo:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Simplificado da sa√≠da do Babel:</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TypeError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Cannot call a class as a function\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// Nosso codigo:</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Fred'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ‚úÖ Certo</span>\n<span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'George'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// üî¥ N√£o pode chamar uma classe como uma fun√ß√£o</span></code></pre></div>\n<p>Voc√™ deve ter visto c√≥digos como este no seu pacote. Isso √© o que todas as fun√ß√µes <code class=\"language-text\">_classCallCheck</code> fazem. (Voc√™ pode reduzir o tamanho do pacote selecionando o modo ‚Äúloose mode‚Äù sem checagens, mas isso pode complicar a transi√ß√£o para classes nativas reais.)</p>\n<hr>\n<p>Agora voc√™ deve entender mais ou menos a diferen√ßa entre chamar uma coisa com <code class=\"language-text\">new</code> ou sem:</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th><code class=\"language-text\">new Person()</code></th>\n<th><code class=\"language-text\">Person()</code></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">classe</code></td>\n<td>‚úÖ <code class=\"language-text\">this</code> √© uma inst√¢ncia de <code class=\"language-text\">Person</code></td>\n<td>üî¥ <code class=\"language-text\">TypeError</code></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">fun√ß√£o</code></td>\n<td>‚úÖ <code class=\"language-text\">this</code> √© uma inst√¢ncia de <code class=\"language-text\">Person</code></td>\n<td>üò≥ <code class=\"language-text\">this</code> √© <code class=\"language-text\">window</code> ou <code class=\"language-text\">undefined</code></td>\n</tr>\n</tbody>\n</table>\n<p>Isso √© o motivo de ser importante o React chamar os componentes corretamente. <strong>Se seus componentes est√£o definidos como uma classe, o React precisa usar o <code class=\"language-text\">new</code> na chamada.</strong></p>\n<p>Ent√£o o React pode apenas verificar se uma coisa √© uma clase ou n√£o?</p>\n<p>N√£o √© t√£o simples! Mesmo que n√≥s pudessemos <a href=\"https://stackoverflow.com/questions/29093396/how-do-you-check-the-difference-between-an-ecmascript-6-class-and-function\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">diferenciar uma classe de uma fun√ß√£o no JavaScript</a>, isso ainda n√£o ajudaria em classes processadas por ferramentas como o Babel. Para o navegador, elas s√£o apenas fun√ß√µes. Azar para o React.</p>\n<hr>\n<p>Certo. Ent√£o o React poderia usar o <code class=\"language-text\">new</code> em toda chamada? Infelizmente, isso n√£o funciona sempre.</p>\n<p>Para fun√ß√µes regulares, chamar elas com <code class=\"language-text\">new</code> daria uma inst√¢ncia do objeto <code class=\"language-text\">this</code>. Isso √© desej√°vel nas fun√ß√µes escritas como construtores (como o nosso <code class=\"language-text\">Person</code>), mas seria confuso para componentes funcionais:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// N√£o esperamos que `this` seja qualquer inst√¢ncia aqui</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Isso ainda poderia ser toler√°vel. Existem 2 <em>outras</em> raz√µes para matar essa ideia.</p>\n<hr>\n<p>A primeira raz√£o √© que sempre usar <code class=\"language-text\">new</code> n√£o funcionaria para arrow functions nativas (n√£o aquelas compiladas pelo Babel), pois chamando com <code class=\"language-text\">new</code> retornaria um erro:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Greeting</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// üî¥ Greeting n√£o √© um construtor</span></code></pre></div>\n<p>Esse comportamento √© intecional e segue o design das arrow functions. Uma das muitas caracter√≠sticas das arrow functions √© a de que elas <em>n√£o</em> possuem um <code class=\"language-text\">this</code> pr√≥prio - no lugar disso, o <code class=\"language-text\">this</code> √© resolvido como a fun√ß√£o regular mais pr√≥xima:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Friends</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>    <span class=\"token keyword\">const</span> friends <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friends<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> friends<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">friend</span> <span class=\"token operator\">=></span>\n      <span class=\"token operator\">&lt;</span>Friend\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token comment\">// o `this` √© resolvido como o do m√©todo `render`</span></span><span class=\"gatsby-highlight-code-line\">        size<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">}</span></span>        name<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>friend<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span>\n        key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Certo. ent√£o <strong>arrow functions n√£o possuem o seu pr√≥prio <code class=\"language-text\">this</code>.</strong> Mas isso significa que elas seriam inteiramente in√∫teis como construtores!</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Person</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// üî¥ Isso n√£o faria sentido!</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Assim, <strong>O JavaScript n√£o permite a chamada de uma arrow function com <code class=\"language-text\">new</code>.</strong> Se voc√™ fizer isso, provavelmente cometeu um erro mesmo, e √© melhor ser avisado o mais cedo poss√≠vel. Isso √© similar ao motivo do JavaScript n√£o deixar voc√™ chamar uma classe <em>sem</em> o <code class=\"language-text\">new</code>.</p>\n<p>Isso √© legal, mas tamb√©m estraga nossos planos. O React n√£o pode apenas chamar <code class=\"language-text\">new</code> em qualquer coisa porque isso quebraria as arrow functions! N√≥s poderiamos tentar detectar as arrow functions pela falta de <code class=\"language-text\">prototype</code>, e n√£o colocar o <code class=\"language-text\">new</code> nelas:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// undefined</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// {constructor: f}</span></code></pre></div>\n<p>Mas isso <a href=\"https://github.com/facebook/react/issues/4599#issuecomment-136562930\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">n√£o funcionaria</a> para fun√ß√µes compiladas com o Babel. Isso pode n√£o ser grande coisa, mas existe outra raz√£o que faz essa abordagem um caminho sem sa√≠das.</p>\n<hr>\n<p>Outra raz√£o para n√£o colocarmos <code class=\"language-text\">new</code> √© que isso impediria o React de suportar componentes que retornam string ou outros tipos primitivos.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token string\">'Hello'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ‚úÖ 'Hello'</span>\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// üò≥ Greeting {}</span></code></pre></div>\n<p>Isso, novamente, tem a ver com as peculiaridades do design do <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">operador <code class=\"language-text\">new</code></a>. Como n√≥s vimos anteriormente, <code class=\"language-text\">new</code> diz ao JavaScript para criar um objeto, fazer o <code class=\"language-text\">this</code> virar o objeto dentro da fun√ß√£o, e depois nos dar um objeto que √© resultado do <code class=\"language-text\">new</code>.</p>\n<p>Por√©m, o JavaScript tamb√©m permite que a fun√ß√£o chamada com <code class=\"language-text\">new</code> <em>sobrescreva</em> o valor retornado por <code class=\"language-text\">new</code> retornando algum outro objeto. Provavelmente, isso foi considerado √∫til para padr√µes como o polling, onde queremos reusar inst√¢ncias:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// Criado tardio</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">var</span> zeroVector <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Vector</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> y <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>zeroVector <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// Reusa a mesma inst√¢ncia</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> zeroVector<span class=\"token punctuation\">;</span></span>    <span class=\"token punctuation\">}</span>\n    zeroVector <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> x<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> y<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">var</span> b <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">var</span> c <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// üò≤ b === c</span></span></code></pre></div>\n<p>Por√©m, <code class=\"language-text\">new</code> tamb√©m <em>ignora completamente</em> o valor de retorno da fun√ß√£o se ele <em>n√£o</em> for um objeto. Se voc√™ retornar uma string ou um n√∫mero, √© com se n√£o existisse nenhum <code class=\"language-text\">return</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Answer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">42</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">Answer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ‚úÖ 42</span>\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Answer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// üò≥ Answer {}</span></code></pre></div>\n<p>N√£o existe uma forma de ler um valor primitivo (como um n√∫mero ou uma string) de uma fun√ß√£o quando chamada com <code class=\"language-text\">new</code>. Dessa forma, se o React sempre usar <code class=\"language-text\">new</code>, n√£o seria poss√≠vel adicionar suporte para componentes que retornam strings!</p>\n<p>Isso √© inaceit√°vel, ent√£o devemos ajustar.</p>\n<hr>\n<p>O que aprendemos at√© agora? O React precisa chamar classes (incluindo a sa√≠da do Babel) <em>com</em> <code class=\"language-text\">new</code>, mas ele precisa chamar fun√ß√µes regulares e arrow functions (incluindo da sa√≠da do Babel) <em>sem</em> o <code class=\"language-text\">new</code>. Ainda n√£o existe nenhuma forma de distingu√≠-los.</p>\n<p><strong>Se n√£o podemos resolver um problema gen√©rico, podemos resolver um mais espec√≠fico?</strong></p>\n<p>Quando voc√™ define um componente como uma classe, voc√™ provavelmente quer que herde de <code class=\"language-text\">React.Component</code> para usar os m√©todos integrados como o <code class=\"language-text\">this.setState()</code>. <strong>Em vez de tentar detectar todas as classes, podemos detectar apenas os decendentes de <code class=\"language-text\">React.Component</code>?</strong></p>\n<p>Spoiler: isso √© exatamente o que o React faz.</p>\n<hr>\n<p>Talvez, a forma idiom√°tica de verificar se <code class=\"language-text\">Greeting</code> √© uma classe do React, √© testando <code class=\"language-text\">Greeting.prototype instanceof React.Component</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">A</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">B</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">A</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">B</span><span class=\"token punctuation\">.</span>prototype <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">A</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code></pre></div>\n<p>Eu sei o que voc√™ est√° pensando. O que aconteceu aqui?! Para responder isso, precisamos entender os protypes do JavaScript.</p>\n<p>Voc√™ pode estar familiarizado com a ‚Äúcadeia de prototype‚Äù. Todo objeto no JavaScript pode ter um ‚Äúprototype‚Äù. Quando n√≥s escrevemos <code class=\"language-text\">fred.sayHi()</code> mas o objeto <code class=\"language-text\">fred</code> n√£o tem uma propriedade <code class=\"language-text\">sayHi</code>, procuramos por <code class=\"language-text\">sayHi</code> no prototype de <code class=\"language-text\">fred</code>. Se n√£o acharmos l√°, procuramos no pr√≥ximo prototype da cadeia - o prototype do prototype de <code class=\"language-text\">fred</code>. E assim por diante.</p>\n<p><strong>De maneira confusa, a propriedade <code class=\"language-text\">prototype</code> de uma classe ou fun√ß√£o <em>n√£o</em> aponta para o prototype de seu valor.</strong> Eu n√£o estou brincando.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ü§™ N√£o √© o prototype de Person</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Person<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// üò≥ √â o prototype de Person</span></code></pre></div>\n<p>Ent√£o a ‚Äúcadeia de prototype‚Äù √© mais como <code class=\"language-text\">__proto__.__proto__.__proto__</code> do que <code class=\"language-text\">prototype.prototype.prototype</code>. Isso levou anos para eu entender.</p>\n<p>O que √© a propriedade <code class=\"language-text\">prototype</code> de uma fun√ß√£o ou uma classe, ent√£o? <strong>√â o <code class=\"language-text\">__proto__</code> dado √† todos os objetos criados √† partir da fun√ß√£o ou classe!</strong></p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sayHi</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hi, I am '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">var</span> fred <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Fred'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Define `fred.__proto__` como `Person.prototype`</span></span></code></pre></div>\n<p>E essa cadeia de <code class=\"language-text\">__proto__</code> √© como o JavaScript procura por propriedades:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">fred<span class=\"token punctuation\">.</span><span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 1. fred possui uma propriedade sayHi? N√£o.</span>\n<span class=\"token comment\">// 2. fred.__proto__ possui um propriedade sayHi? Sim. Chame ela!</span>\n\nfred<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 1. fred possui uma propriedade toString? N√£o.</span>\n<span class=\"token comment\">// 2. fred.__proto__ possui um propriedade toString? N√£o.</span>\n<span class=\"token comment\">// 2. fred.__proto____proto__ possui um propriedade toString? Sim. Chame ela!</span></code></pre></div>\n<p>Na pr√°tica, voc√™ deveria quase nunca precisar tocar no <code class=\"language-text\">__proto__</code> diretamente do c√≥digo, a menos que voc√™ esteja debugando alguma coisa relacionada √† cadeia de prototype. Se voc√™ quer que coisas estejam dispon√≠veis em <code class=\"language-text\">fred.__proto__</code>, voc√™ deveria coloc√°-las em <code class=\"language-text\">Person.prototype</code>. Pelo menos isso √© como as coisas foram projetadas inicialmente.</p>\n<p>A propriedade <code class=\"language-text\">__proto__</code> n√£o deveria ser exposta pelos navegadores, j√° que a cadeia de prototype era considerada uma coisa interna. Mas alguns navegadores adicionaram o <code class=\"language-text\">__proto__</code> e eventualmente ela foi padronizada a contragosto (mas foi descontinuada em favor de <code class=\"language-text\">Object.getPrototypeOf()</code>).</p>\n<p><strong>Ainda assim eu acho muito confuso que uma propriedade chamada <code class=\"language-text\">prototype</code> n√£o d√° o prototype do valor</strong> (por exemplo, <code class=\"language-text\">fred.prototype</code> n√£o √© definido porque <code class=\"language-text\">fred</code> n√£o √© uma fun√ß√£o). Pessoalmente, eu acho que isso √© a maior raz√£o que mesmo desenvolvedores experientes tendem √† n√£o entender os prototypes do JavaScript.</p>\n<hr>\n<p>Este post est√° longo, n√©? Eu diria que estamos em 80% dele. Aguente firme.</p>\n<p>Sabemos que quando usamos <code class=\"language-text\">obj.foo</code>, o JavaScript na verdade procura por <code class=\"language-text\">foo</code> em <code class=\"language-text\">obj</code>, <code class=\"language-text\">obj.__proto__</code>, <code class=\"language-text\">obj.__proto__.__proto__</code>, e por a√≠ vai.</p>\n<p>Com classes, voc√™ n√£o est√° exposto diretamente √† esse mecanismo, mas o <code class=\"language-text\">extends</code> tamb√©m funciona por cima da velha cadeia de prototypes. Isso √© como as inst√¢ncias das classes do React conseguem acesso aos m√©todos como <code class=\"language-text\">setState</code>:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Greeting</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span></span>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> c <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Greeting.prototype</span>\n<span class=\"gatsby-highlight-code-line\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// React.Component.prototype</span></span>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Object.prototype</span>\n\nc<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">// Achado em c.__proto__ (Greeting.prototype)</span>\n<span class=\"gatsby-highlight-code-line\">c<span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">// Achado em c.__proto__.__proto__ (React.Component.prototype)</span></span>c<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">// Achado em c.__proto__.__proto__.__proto__ (Object.prototype)</span></code></pre></div>\n<p>Em outras palavras, <strong>quando voc√™ usa classes, a cadeia de <code class=\"language-text\">__proto__</code> de uma inst√¢ncia ‚Äúimita‚Äù a hierarquia de classes:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// cadeia de `extends`</span>\nGreeting\n  ‚Üí React<span class=\"token punctuation\">.</span>Component\n    ‚Üí <span class=\"token function\">Object</span> <span class=\"token punctuation\">(</span>impl√≠cito<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// cadeia de `__proto__`</span>\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  ‚Üí <span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">.</span>prototype\n    ‚Üí React<span class=\"token punctuation\">.</span><span class=\"token class-name\">Component</span><span class=\"token punctuation\">.</span>prototype\n      ‚Üí <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype</code></pre></div>\n<p>2 Cadeias.</p>\n<hr>\n<p>Assim como a cadeia de <code class=\"language-text\">__proto__</code> imita a hierarquia de classes, podemos verificar se <code class=\"language-text\">Greeting</code> herda de <code class=\"language-text\">React.Component</code> com <code class=\"language-text\">Greeting.prototype</code>, e dessa forma seguir sua cadeia de <code class=\"language-text\">__proto__</code>:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// cadeia de `__proto__`</span>\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"gatsby-highlight-code-line\">  ‚Üí <span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// üïµÔ∏è Come√ßamos aqui</span></span><span class=\"gatsby-highlight-code-line\">    ‚Üí React<span class=\"token punctuation\">.</span><span class=\"token class-name\">Component</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// ‚úÖ Encontrado!</span></span>      ‚Üí <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype</code></pre></div>\n<p>Convenientemente, <code class=\"language-text\">x instanceof y</code> faz exatamente esse mesmo tipo de busca. Ele segue a cadeia de <code class=\"language-text\">x.__proto__</code> procurando por <code class=\"language-text\">Y.prototype</code>.</p>\n<p>Normalmente, isso √© usado para determinar se uma coisa √© uma inst√¢ncia de uma classe:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">let</span> greeting <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>greeting <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token comment\">// greeting (üïµÔ∏è‚Äç Come√ßamos aqui)</span>\n<span class=\"token comment\">//   .__proto__ ‚Üí Greeting.prototype (‚úÖ Encontrado!)</span>\n<span class=\"token comment\">//     .__proto__ ‚Üí React.Component.prototype</span>\n<span class=\"token comment\">//       .__proto__ ‚Üí Object.prototype</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>greeting <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token comment\">// greeting (üïµÔ∏è‚Äç Come√ßamos aqui)</span>\n<span class=\"token comment\">//   .__proto__ ‚Üí Greeting.prototype</span>\n<span class=\"token comment\">//     .__proto__ ‚Üí React.Component.prototype (‚úÖ Encontrado!)</span>\n<span class=\"token comment\">//       .__proto__ ‚Üí Object.prototype</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>greeting <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token comment\">// greeting (üïµÔ∏è‚Äç Come√ßamos aqui)</span>\n<span class=\"token comment\">//   .__proto__ ‚Üí Greeting.prototype</span>\n<span class=\"token comment\">//     .__proto__ ‚Üí React.Component.prototype</span>\n<span class=\"token comment\">//       .__proto__ ‚Üí Object.prototype (‚úÖ Encontrado!)</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>greeting <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Banana</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token comment\">// greeting (üïµÔ∏è‚Äç Come√ßamos aqui)</span>\n<span class=\"token comment\">//   .__proto__ ‚Üí Greeting.prototype</span>\n<span class=\"token comment\">//     .__proto__ ‚Üí React.Component.prototype</span>\n<span class=\"token comment\">//       .__proto__ ‚Üí Object.prototype (üôÖ‚Äç N√£o foi encontrado!)</span></code></pre></div>\n<p>Mas isso tamb√©m funciona normal para determinar se uma classe herda de outra classe:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">.</span>prototype <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// greeting</span>\n<span class=\"token comment\">//   .__proto__ ‚Üí Greeting.prototype (üïµÔ∏è‚Äç Come√ßamos aqui)</span>\n<span class=\"token comment\">//     .__proto__ ‚Üí React.Component.prototype (‚úÖ Encontrado!)</span>\n<span class=\"token comment\">//       .__proto__ ‚Üí Object.prototype</span></code></pre></div>\n<p>E essa verifica√ß√£o √© como determinamos se uma coisa √© um componente de classe do React ou uma fun√ß√£o regular.</p>\n<hr>\n<p>Mas isso n√£o √© o que o React faz. üò≥</p>\n<p>Uma peculiaridade da solu√ß√£o com <code class=\"language-text\">instanceof</code> √© que ela n√£o funciona quando temos m√∫ltiplas c√≥pias do React na p√°gina, e o componente que estamos verificando herda de <em>outro</em> <code class=\"language-text\">React.Component</code> de uma c√≥pia do React. Misturando m√∫ltiplas c√≥pias do React em um √∫nico projeto √© ruim por diversas raz√µes, e hist√≥ricamente tentamos evitar tais problemas quando poss√≠vel. (Com o Hooks, n√≥s <a href=\"https://github.com/facebook/react/issues/13991\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">provavelmente vamos precisar</a> for√ßar a remo√ß√£o da duplica√ß√£o.)</p>\n<p>Uma outra possibilidade heur√≠stica poderia ser a verifica√ß√£o da presen√ßa de um m√©todo <code class=\"language-text\">render</code> no prototype. Por√©m, <a href=\"https://github.com/facebook/react/issues/4599#issuecomment-129714112\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">n√£o estava claro</a> como a API iria evoluir. Toda verifica√ß√£o tem um custo e n√≥s n√£o quer√≠amos adicionar mais uma. Isso tamb√©m n√£o funcionaria se o <code class=\"language-text\">render</code> fosse definido como um m√©todo de inst√¢ncia, como na sintaxe de propriedade de uma classe.</p>\n<p>Ent√£o, ao inv√©s disso, o React <a href=\"https://github.com/facebook/react/pull/4663\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">adicionou</a> uma flag especial para o componente base. O React verifica pela presen√ßa dessa flag, e dessa forma ele sabe quando uma coisa √© uma classe do React ou n√£o.</p>\n<p>Originalmente a flag estava na classe base <code class=\"language-text\">React.Component</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Dentro do React</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\nComponent<span class=\"token punctuation\">.</span>isReactClass <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Podemos verificar dessa maneira</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Greeting</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Greeting<span class=\"token punctuation\">.</span>isReactClass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ‚úÖ Sim</span></code></pre></div>\n<p>Por√©m, algumas implementa√ß√µes de classe que t√≠nhamos como alvo <a href=\"https://github.com/scala-js/scala-js/issues/1900\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">n√£o</a> copiavam propriedades est√°ticas (ou definiam um <code class=\"language-text\">__proto__</code> n√£o padronizado), e a flag era jogada fora.</p>\n<p>Isso √© o motivo do React ter <a href=\"https://github.com/facebook/react/pull/5021\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">movido</a> a flag para <code class=\"language-text\">React.Component.prototype</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Dentro do React</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token class-name\">Component</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>isReactComponent <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Podemos verificar dessa maneira</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Greeting</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Greeting</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>isReactComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ‚úÖ Sim</span></code></pre></div>\n<p><strong>E isso √© literalmente tudo o que √© feito.</strong></p>\n<p>Voc√™ pode estar pensando sobre o motivo de ser um objeto e n√£o um booleano. Isso n√£o importa muito na pr√°tica, mas em vers√µes iniciais do Jest (antes do Jest ser Bom‚Ñ¢Ô∏è) o automocking era ativado automaticamente. Os mocks gerados omitiam as propriedades primitivas, <a href=\"https://github.com/facebook/react/pull/4663#issuecomment-136533373\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">quebrando a verifica√ß√£o</a>. Obrigado Jest.</p>\n<p>A verifica√ß√£o <code class=\"language-text\">isReactComponent</code> √© <a href=\"https://github.com/facebook/react/blob/769b1f270e1251d9dbdce0fcbd9e92e502d059b8/packages/react-reconciler/src/ReactFiber.js#L297-L300\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">usada no React</a> at√© hoje.</p>\n<p>Se voc√™ n√£o herdar de <code class=\"language-text\">React.Component</code>, o React n√£o vai encontrar a propriedade <code class=\"language-text\">isReactComponent</code> no seu prototype, e n√£o vai tratar o componente como uma classe. Agora voc√™ sabe o motivo da <a href=\"https://stackoverflow.com/a/42680526/458193\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">resposta mais bem avaliada</a> para o erro <code class=\"language-text\">Cannot call a class as a function</code> ser a adi√ß√£o de <code class=\"language-text\">extends React.Component</code>. Por fim, um <a href=\"https://github.com/facebook/react/pull/11168\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">alerta foi adicionado</a> informando que <code class=\"language-text\">prototype.render</code> existe mas <code class=\"language-text\">prototype.isReactComponent</code> n√£o.</p>\n<hr>\n<p>Voc√™ pode dizer que essa hist√≥ria √© como matar um mosquito com um canh√£o. <strong>A solu√ß√£o √© simples, mas eu fui longe para explicar o <em>porque</em> do React acabar utilizando ela, e quais eram as alternativas.</strong></p>\n<p>Na minha experi√™ncia, isso acontece para APIs de bibliotecas. Por uma API ser simples de usar, na maioria dos casos voc√™ precisa considerar a sem√¢ntica da linguagem (possivelmente, para algumas linguagens, incluindo vers√µes futuras), o desempenho, a ergonomia com e sem os tempos de compila√ß√£o, o estado do ecossistema e os m√©todos para cria√ß√£o de pacotes, avisos o mais cedo poss√≠vel, e muitas outras coisas. O resultado final pode n√£o ser sempre o mais elegante, mais deve ser o mais pr√°tico.</p>\n<p><strong>Se a API for um sucesso, <em>seus usu√°rios</em> nunca v√£o precisar pensar sobre o processo.</strong> Ao inv√©s disso eles podem focar na cria√ß√£o de aplica√ß√µes.</p>\n<p>Mas se voc√™ tamb√©m √© curioso‚Ä¶ √© legal saber como ela funciona.</p>","timeToRead":17,"frontmatter":{"title":"Como o React diferencia uma classe de uma fun√ß√£o?","date":"December 02, 2018","spoiler":"Falaremos sobre classes, new, instanceof, prototype chains e do design da API.","cta":null},"fields":{"slug":"/pt-br/how-does-react-tell-a-class-from-a-function/","langKey":"pt-br"}}},"pageContext":{"slug":"/pt-br/how-does-react-tell-a-class-from-a-function/","translations":["es","fr","hu","ja","nl","pt-br","sk","zh-hans","zh-hant"],"translatedLinks":["/why-do-we-write-super-props/"]}}}