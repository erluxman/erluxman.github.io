{"componentChunkName":"component---src-templates-blog-post-js","path":"/algebraic-effects-for-the-rest-of-us/","result":{"data":{"site":{"siteMetadata":{"title":"Overreacted","author":"Dan Abramov"}},"markdownRemark":{"id":"748edf77-2c68-5270-860e-e265e367c89f","html":"<p>Have you heard about <em>algebraic effects</em>?</p>\n<p>My first attempts to figure out what they are or why I should care about them were unsuccessful. I found a <a href=\"https://www.eff-lang.org/handlers-tutorial.pdf\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">few</a> <a href=\"https://www.microsoft.com/en-us/research/wp-content/uploads/2016/08/algeff-tr-2016-v2.pdf\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">pdfs</a> but they only confused me more. (There‚Äôs something about academic pdfs that makes me sleepy.)</p>\n<p>But my colleague Sebastian <a href=\"https://mobile.twitter.com/sebmarkbage/status/763792452289343490\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">kept</a>¬†<a href=\"https://mobile.twitter.com/sebmarkbage/status/776883429400915968\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">referring</a> <a href=\"https://mobile.twitter.com/sebmarkbage/status/776840575207116800\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">to</a> <a href=\"https://mobile.twitter.com/sebmarkbage/status/969279885276454912\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">them</a> as a mental model for some things we do inside of React. (Sebastian works on the React team and came up with quite a few ideas, including Hooks and Suspense.) At some point, it became a running joke on the React team, with many of our conversations ending with:</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5fb19385d24afb94180b6ba9aeb2b8d4/066f9/effects.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 400px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 87.16216216216216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAQDBQL/xAAWAQEBAQAAAAAAAAAAAAAAAAACAwD/2gAMAwEAAhADEAAAAeVtVlNwrBdforHjhb//xAAdEAACAgEFAAAAAAAAAAAAAAABAgADERMhIjIz/9oACAEBAAEFAgu9yaYxCoK2K7NxEr85Z3//xAAWEQADAAAAAAAAAAAAAAAAAAAAEBH/2gAIAQMBAT8BI//EABkRAAEFAAAAAAAAAAAAAAAAAAEAEBESUf/aAAgBAgEBPwESrHH/AP/EABsQAAMAAgMAAAAAAAAAAAAAAAABEQIhEBJh/9oACAEBAAY/AhbvC6pssbnhMtMRkM//xAAcEAABBQEBAQAAAAAAAAAAAAABABARIUExUXH/2gAIAQEAAT8h6MQS7j0Q0nDe0EQwmNK0gPhDXflh/9oADAMBAAIAAwAAABDcL/z/xAAZEQABBQAAAAAAAAAAAAAAAAARAAEQQVH/2gAIAQMBAT8QLWg2f//EABkRAQACAwAAAAAAAAAAAAAAAAEAECExUf/aAAgBAgEBPxBLKR7Iar//xAAeEAEAAgIBBQAAAAAAAAAAAAABABEhQaExUXGx8f/aAAgBAQABPxBLMvoqCCrF614lnURBHN9agjMlNH1m5Zjzl2rB2nGfcZefP//Z'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"\"Algebraic Effects\" caption on the \"Ancient Aliens\" guy meme\"\n        title=\"\"\n        src=\"/static/5fb19385d24afb94180b6ba9aeb2b8d4/066f9/effects.jpg\"\n        srcset=\"/static/5fb19385d24afb94180b6ba9aeb2b8d4/a80bd/effects.jpg 148w,\n/static/5fb19385d24afb94180b6ba9aeb2b8d4/1c91a/effects.jpg 295w,\n/static/5fb19385d24afb94180b6ba9aeb2b8d4/066f9/effects.jpg 400w\"\n        sizes=\"(max-width: 400px) 100vw, 400px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>It turned out that algebraic effects are a cool concept and not as scary as I thought from those pdfs. <strong>If you‚Äôre just using React, you don‚Äôt need to know anything about them ‚Äî but if you‚Äôre feeling curious, like I was, read on.</strong></p>\n<p><em>(Disclaimer: I‚Äôm not a programming language researcher, and might have messed something up in my explanation. I am not an authority on this topic so let me know!)</em></p>\n<h3 id=\"not-production-ready-yet\"><a href=\"#not-production-ready-yet\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Not Production Ready Yet</h3>\n<p><em>Algebraic Effects</em> are a research programming language feature. This means that <strong>unlike <code class=\"language-text\">if</code>, functions, or even <code class=\"language-text\">async / await</code>, you probably can‚Äôt really use them in production yet.</strong> They are only supported by a <a href=\"https://www.eff-lang.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">few</a> <a href=\"https://www.microsoft.com/en-us/research/project/koka/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">languages</a> that were created specifically to explore that idea. There is progress on productionizing them in OCaml which is‚Ä¶ still <a href=\"https://github.com/ocaml-multicore/ocaml-multicore/wiki\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ongoing</a>. In other words, <a href=\"https://www.youtube.com/watch?v=otCpCn0l4Wo\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Can‚Äôt Touch This</a>.</p>\n<blockquote>\n<p>Edit: a few people mentioned that LISP languages <a href=\"#learn-more\">do offer something similar</a>, so you can use it in production if you write LISP.</p>\n</blockquote>\n<h3 id=\"so-why-should-i-care\"><a href=\"#so-why-should-i-care\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>So Why Should I Care?</h3>\n<p>Imagine that you‚Äôre writing code with <code class=\"language-text\">goto</code>, and somebody shows you <code class=\"language-text\">if</code> and <code class=\"language-text\">for</code> statements. Or maybe you‚Äôre deep in the callback hell, and somebody shows you <code class=\"language-text\">async / await</code>. Pretty cool, huh?</p>\n<p>If you‚Äôre the kind of person who likes to learn about programming ideas several years before they hit the mainstream, it might be a good time to get curious about algebraic effects. Don‚Äôt feel like you <em>have to</em> though. It is a bit like thinking about <code class=\"language-text\">async / await</code> in 1999.</p>\n<h3 id=\"okay-what-are-algebraic-effects\"><a href=\"#okay-what-are-algebraic-effects\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Okay, What Are Algebraic Effects?</h3>\n<p>The name might be a bit intimidating but the idea is simple. If you‚Äôre familiar with <code class=\"language-text\">try / catch</code> blocks, you‚Äôll figure out algebraic effects very fast.</p>\n<p>Let‚Äôs recap <code class=\"language-text\">try / catch</code> first. Say you have a function that throws. Maybe there‚Äôs a bunch of functions between it and the <code class=\"language-text\">catch</code> block:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> name <span class=\"token operator\">=</span> user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  \t<span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'A girl has no name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">makeFriends</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user1<span class=\"token punctuation\">,</span> user2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  user1<span class=\"token punctuation\">.</span>friendNames<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span>user2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  user2<span class=\"token punctuation\">.</span>friendNames<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span>user1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> arya <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> friendNames<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> gendry <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'Gendry'</span><span class=\"token punctuation\">,</span> friendNames<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">makeFriends</span><span class=\"token punctuation\">(</span>arya<span class=\"token punctuation\">,</span> gendry<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Oops, that didn't work out: \"</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>We <code class=\"language-text\">throw</code> inside <code class=\"language-text\">getName</code>, but it ‚Äúbubbles‚Äù up right through <code class=\"language-text\">makeFriends</code> to the closest <code class=\"language-text\">catch</code> block. This is an important property of <code class=\"language-text\">try / catch</code>. <strong>Things in the middle don‚Äôt need to concern themselves with error handling.</strong></p>\n<p>Unlike error codes in languages like C, with <code class=\"language-text\">try / catch</code>, you don‚Äôt have to manually pass errors through every intermediate layer in the fear of losing them. They get propagated automatically.</p>\n<h3 id=\"what-does-this-have-to-do-with-algebraic-effects\"><a href=\"#what-does-this-have-to-do-with-algebraic-effects\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What Does This Have to Do With Algebraic Effects?</h3>\n<p>In the above example, once we hit an error, we can‚Äôt continue. When we end up in the <code class=\"language-text\">catch</code> block, there‚Äôs no way we can continue executing the original code.</p>\n<p>We‚Äôre done. It‚Äôs too late. The best we can do is to recover from a failure and maybe somehow retry what we were doing, but we can‚Äôt magically ‚Äúgo back‚Äù to where we were, and do something different. <strong>But with algebraic effects, <em>we can</em>.</strong></p>\n<p>This is an example written in a hypothetical JavaScript dialect (let‚Äôs call it ES2025 just for kicks) that lets us <em>recover</em> from a missing <code class=\"language-text\">user.name</code>:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> name <span class=\"token operator\">=</span> user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  \tname <span class=\"token operator\">=</span> perform <span class=\"token string\">'ask_name'</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">makeFriends</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user1<span class=\"token punctuation\">,</span> user2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  user1<span class=\"token punctuation\">.</span>friendNames<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span>user2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  user2<span class=\"token punctuation\">.</span>friendNames<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span>user1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> arya <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> friendNames<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> gendry <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'Gendry'</span><span class=\"token punctuation\">,</span> friendNames<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">makeFriends</span><span class=\"token punctuation\">(</span>arya<span class=\"token punctuation\">,</span> gendry<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token function\">handle</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">effect</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>effect <span class=\"token operator\">===</span> <span class=\"token string\">'ask_name'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">  \tresume <span class=\"token keyword\">with</span> <span class=\"token string\">'Arya Stark'</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<p><em>(I apologize to all readers from 2025 who search the web for ‚ÄúES2025‚Äù and find this article. If algebraic effects are a part of JavaScript by then, I‚Äôd be happy to update it!)</em></p>\n<p>Instead of <code class=\"language-text\">throw</code>, we use a hypothetical <code class=\"language-text\">perform</code> keyword. Similarly, instead of <code class=\"language-text\">try / catch</code>, we use a hypothetical <code class=\"language-text\">try / handle</code>. <strong>The exact syntax doesn‚Äôt matter here ‚Äî I just came up with something to illustrate the idea.</strong></p>\n<p>So what‚Äôs happening? Let‚Äôs take a closer look.</p>\n<p>Instead of throwing an error, we <em>perform an effect</em>. Just like we can <code class=\"language-text\">throw</code> any value, we can pass any value to <code class=\"language-text\">perform</code>. In this example, I‚Äôm passing a string, but it could be an object, or any other data type:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> name <span class=\"token operator\">=</span> user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  \tname <span class=\"token operator\">=</span> perform <span class=\"token string\">'ask_name'</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>When we <code class=\"language-text\">throw</code> an error, the engine looks for the closest <code class=\"language-text\">try / catch</code> error handler up the call stack. Similarly, when we <code class=\"language-text\">perform</code> an effect, the engine would search for the closest <code class=\"language-text\">try / handle</code> <em>effect handler</em> up the call stack:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">makeFriends</span><span class=\"token punctuation\">(</span>arya<span class=\"token punctuation\">,</span> gendry<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span> <span class=\"token function\">handle</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">effect</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>effect <span class=\"token operator\">===</span> <span class=\"token string\">'ask_name'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  \tresume <span class=\"token keyword\">with</span> <span class=\"token string\">'Arya Stark'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This effect lets us decide how to handle the case where a name is missing. The novel part here (compared to exceptions) is the hypothetical <code class=\"language-text\">resume with</code>:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">makeFriends</span><span class=\"token punctuation\">(</span>arya<span class=\"token punctuation\">,</span> gendry<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token function\">handle</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">effect</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>effect <span class=\"token operator\">===</span> <span class=\"token string\">'ask_name'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  \tresume <span class=\"token keyword\">with</span> <span class=\"token string\">'Arya Stark'</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This is the part you can‚Äôt do with <code class=\"language-text\">try / catch</code>. It lets us <strong>jump back to where we performed the effect, and pass something back to it from the handler</strong>. ü§Ø</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> name <span class=\"token operator\">=</span> user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  \t<span class=\"token comment\">// 1. We perform an effect here</span></span>  \tname <span class=\"token operator\">=</span> perform <span class=\"token string\">'ask_name'</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  \t<span class=\"token comment\">// 4. ...and end up back here (name is now 'Arya Stark')</span></span>  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// ...</span>\n\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">makeFriends</span><span class=\"token punctuation\">(</span>arya<span class=\"token punctuation\">,</span> gendry<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token function\">handle</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">effect</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// 2. We jump to the handler (like try/catch)</span></span>  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>effect <span class=\"token operator\">===</span> <span class=\"token string\">'ask_name'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  \t<span class=\"token comment\">// 3. However, we can resume with a value (unlike try/catch!)</span></span>  \tresume <span class=\"token keyword\">with</span> <span class=\"token string\">'Arya Stark'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This takes a bit of time to get comfortable with, but it‚Äôs really not much different conceptually from a ‚Äúresumable <code class=\"language-text\">try / catch</code>‚Äù.</p>\n<p>Note, however, that <strong>algebraic effects are much more flexible than <code class=\"language-text\">try / catch</code>, and recoverable errors are just one of many possible use cases.</strong> I started with it only because I found it easiest to wrap my mind around it.</p>\n<h3 id=\"a-function-has-no-color\"><a href=\"#a-function-has-no-color\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>A Function Has No Color</h3>\n<p>Algebraic effects have interesting implications for asynchronous code.</p>\n<p>In languages with an <code class=\"language-text\">async / await</code>, <a href=\"https://journal.stuffwithstuff.com/2015/02/01/what-color-is-your-function/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">functions usually have a ‚Äúcolor‚Äù</a>. For example, in JavaScript we can‚Äôt just make <code class=\"language-text\">getName</code> asynchronous without also ‚Äúinfecting‚Äù <code class=\"language-text\">makeFriends</code> and its callers with being <code class=\"language-text\">async</code>. This can be a real pain if <em>a piece of code sometimes needs to be sync, and sometimes needs to be async</em>.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// If we want to make this async...</span>\n<span class=\"token keyword\">async</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Then this has to be async too...</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">makeFriends</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user1<span class=\"token punctuation\">,</span> user2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  user1<span class=\"token punctuation\">.</span>friendNames<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">await</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span>user2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  user2<span class=\"token punctuation\">.</span>friendNames<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">await</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span>user1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// And so on...</span></code></pre></div>\n<p>JavaScript generators are <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">similar</a>: if you‚Äôre working with generators, things in the middle also have to be aware of generators.</p>\n<p>So how is that relevant?</p>\n<p>For a moment, let‚Äôs forget about <code class=\"language-text\">async / await</code> and get back to our example:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> name <span class=\"token operator\">=</span> user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  \tname <span class=\"token operator\">=</span> perform <span class=\"token string\">'ask_name'</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">makeFriends</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user1<span class=\"token punctuation\">,</span> user2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  user1<span class=\"token punctuation\">.</span>friendNames<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span>user2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  user2<span class=\"token punctuation\">.</span>friendNames<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span>user1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> arya <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> friendNames<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> gendry <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'Gendry'</span><span class=\"token punctuation\">,</span> friendNames<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">makeFriends</span><span class=\"token punctuation\">(</span>arya<span class=\"token punctuation\">,</span> gendry<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token function\">handle</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">effect</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>effect <span class=\"token operator\">===</span> <span class=\"token string\">'ask_name'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">  \tresume <span class=\"token keyword\">with</span> <span class=\"token string\">'Arya Stark'</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>What if our effect handler didn‚Äôt know the ‚Äúfallback name‚Äù synchronously? What if we wanted to fetch it from a database?</p>\n<p>It turns out, we can call <code class=\"language-text\">resume with</code> asynchronously from our effect handler without making any changes to <code class=\"language-text\">getName</code> or <code class=\"language-text\">makeFriends</code>:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> name <span class=\"token operator\">=</span> user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  \tname <span class=\"token operator\">=</span> perform <span class=\"token string\">'ask_name'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">makeFriends</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user1<span class=\"token punctuation\">,</span> user2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  user1<span class=\"token punctuation\">.</span>friendNames<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span>user2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  user2<span class=\"token punctuation\">.</span>friendNames<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span>user1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> arya <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> friendNames<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> gendry <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'Gendry'</span><span class=\"token punctuation\">,</span> friendNames<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">makeFriends</span><span class=\"token punctuation\">(</span>arya<span class=\"token punctuation\">,</span> gendry<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token function\">handle</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">effect</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>effect <span class=\"token operator\">===</span> <span class=\"token string\">'ask_name'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">  \t<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      resume <span class=\"token keyword\">with</span> <span class=\"token string\">'Arya Stark'</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  \t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>In this example, we don‚Äôt call <code class=\"language-text\">resume with</code> until a second later. You can think of <code class=\"language-text\">resume with</code> as a callback which you may only call once. (You can also impress your friends by calling it a ‚Äúone-shot delimited continuation.‚Äù)</p>\n<p>Now the mechanics of algebraic effects should be a bit clearer. When we <code class=\"language-text\">throw</code> an error, the JavaScript engine ‚Äúunwinds the stack‚Äù, destroying local variables in the process. However, when we <code class=\"language-text\">perform</code> an effect, our hypothetical engine would <em>create a callback</em> with the rest of our function, and <code class=\"language-text\">resume with</code> calls it.</p>\n<p><strong>Again, a reminder: the concrete syntax and specific keywords are made up for this article. They‚Äôre not the point, the point is in the mechanics.</strong></p>\n<h3 id=\"a-note-on-purity\"><a href=\"#a-note-on-purity\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>A Note on Purity</h3>\n<p>It‚Äôs worth noting that algebraic effects came out of functional programming research. Some of the problems they solve are unique to pure functional programming. For example, in languages that <em>don‚Äôt</em> allow arbitrary side effects (like Haskell), you have to use concepts like Monads to wire effects through your program. If you ever read a Monad tutorial, you know they‚Äôre a bit tricky to think about. Algebraic effects help do something similar with less ceremony.</p>\n<p>This is why so much discussion about algebraic effects is incomprehensible to me. (I <a href=\"/things-i-dont-know-as-of-2018/\">don‚Äôt know</a> Haskell and friends.) However, I do think that even in an impure language like JavaScript, <strong>algebraic effects can be a very powerful instrument to separate the <em>what</em> from the <em>how</em> in the code.</strong></p>\n<p>They let you write code that focuses on <em>what</em> you‚Äôre doing:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">enumerateFiles</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dir</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> contents <span class=\"token operator\">=</span> perform <span class=\"token function\">OpenDirectory</span><span class=\"token punctuation\">(</span>dir<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  perform <span class=\"token function\">Log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Enumerating files in '</span><span class=\"token punctuation\">,</span> dir<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> file <span class=\"token keyword\">of</span> contents<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  \tperform <span class=\"token function\">HandleFile</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n<span class=\"gatsby-highlight-code-line\">  perform <span class=\"token function\">Log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Enumerating subdirectories in '</span><span class=\"token punctuation\">,</span> dir<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> directory <span class=\"token keyword\">of</span> contents<span class=\"token punctuation\">.</span>dir<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  \t<span class=\"token comment\">// We can use recursion or call other functions with effects</span>\n  \t<span class=\"token function\">enumerateFiles</span><span class=\"token punctuation\">(</span>directory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"gatsby-highlight-code-line\">  perform <span class=\"token function\">Log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Done'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>And later wrap it with something that specifies <em>how</em>:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">let</span> files <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">enumerateFiles</span><span class=\"token punctuation\">(</span><span class=\"token string\">'C:\\\\'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token function\">handle</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">effect</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>effect <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Log</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  \tmyLoggingLibrary<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>effect<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  \tresume<span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>effect <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">OpenDirectory</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  \tmyFileSystemImpl<span class=\"token punctuation\">.</span><span class=\"token function\">openDir</span><span class=\"token punctuation\">(</span>effect<span class=\"token punctuation\">.</span>dirName<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">contents</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      resume <span class=\"token keyword\">with</span> contents<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  \t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>effect <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">HandleFile</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    files<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>effect<span class=\"token punctuation\">.</span>fileName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    resume<span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// The `files` array now has all the files</span></code></pre></div>\n<p>Which means that those pieces can even become librarified:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> withMyLoggingLibrary <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'my-log'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> withMyFileSystem <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'my-fs'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">ourProgram</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">enumerateFiles</span><span class=\"token punctuation\">(</span><span class=\"token string\">'C:\\\\'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">withMyLoggingLibrary</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">withMyFileSystem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">ourProgram</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Unlike <code class=\"language-text\">async / await</code> or Generators, <strong>algebraic effects don‚Äôt require complicating functions ‚Äúin the middle‚Äù</strong>. Our <code class=\"language-text\">enumerateFiles</code> call could be deep within <code class=\"language-text\">ourProgram</code>, but as long as there‚Äôs an effect handler <em>somewhere above</em> for each of the effects it may perform, our code would still work.</p>\n<p>Effect handlers let us decouple the program logic from its concrete effect implementations without too much ceremony or boilerplate code. For example, we could completely override the behavior in tests to use a fake filesystem and to snapshot logs instead of outputting them to the console:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> withFakeFileSystem <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'fake-fs'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">withLogSnapshot</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fn</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> logs <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  \t<span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token function\">handle</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">effect</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  \t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>effect <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Log</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  \t  logs<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>effect<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \t  resume<span class=\"token punctuation\">;</span>\n  \t<span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// Snapshot emitted logs.</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>logs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toMatchSnapshot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'my program'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> fakeFiles <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token comment\">/* ... */</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">withFakeFileSystem</span><span class=\"token punctuation\">(</span>fakeFiles<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">  \t<span class=\"token function\">withLogSnapshot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">\t  <span class=\"token function\">ourProgram</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  \t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Because there is no <a href=\"https://journal.stuffwithstuff.com/2015/02/01/what-color-is-your-function/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">‚Äúfunction color‚Äù</a> (code in the middle doesn‚Äôt need to be aware of effects) and effect handlers are <em>composable</em> (you can nest them), you can create very expressive abstractions with them.</p>\n<h3 id=\"a-note-on-types\"><a href=\"#a-note-on-types\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>A Note on Types</h3>\n<p>Because algebraic effects are coming from statically typed languages, much of the debate about them centers on the ways they can be expressed in types. This is no doubt important but can also make it challenging to grasp the concept. That‚Äôs why this article doesn‚Äôt talk about types at all. However, I should note that usually the fact that a function can perform an effect would be encoded into its type signature. So you shouldn‚Äôt end up in a situation where random effects are happening and you can‚Äôt trace where they‚Äôre coming from.</p>\n<p>You might argue that algebraic effects technically do <a href=\"https://journal.stuffwithstuff.com/2015/02/01/what-color-is-your-function/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">‚Äúgive color‚Äù</a> to functions in statically typed languages because effects are a part of the type signature. That‚Äôs true. However, fixing a type annotation for an intermediate function to include a new effect is not by itself a semantic change ‚Äî unlike adding <code class=\"language-text\">async</code> or turning a function into a generator. Inference can also help avoid cascading changes. An important difference is you can ‚Äúbottle up‚Äù an effect by providing a noop or a mock implementation (for example, a sync call for an async effect), which lets you prevent it from reaching the outer code if necessary ‚Äî or turn it into a different effect.</p>\n<h3 id=\"should-we-add-algebraic-effects-to-javascript\"><a href=\"#should-we-add-algebraic-effects-to-javascript\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Should We Add Algebraic Effects to JavaScript?</h3>\n<p>Honestly, I don‚Äôt know. They are very powerful, and you can make an argument that they might be <em>too</em> powerful for a language like JavaScript.</p>\n<p>I think they could be a great fit for a language where mutation is uncommon, and where the standard library fully embraced effects. If you primarily do <code class=\"language-text\">perform Timeout(1000)</code>, <code class=\"language-text\">perform Fetch(&#39;http://google.com&#39;)</code>, and <code class=\"language-text\">perform ReadFile(&#39;file.txt&#39;)</code>, and your language has pattern matching and static typing for effects, it might be a very nice programming environment.</p>\n<p>Maybe that language could even compile to JavaScript!</p>\n<h3 id=\"how-is-all-of-this-relevant-to-react\"><a href=\"#how-is-all-of-this-relevant-to-react\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How Is All of This Relevant to React?</h3>\n<p>Not that much. You can even say it‚Äôs a stretch.</p>\n<p>If you watched <a href=\"https://reactjs.org/blog/2018/03/01/sneak-peek-beyond-react-16.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">my talk about Time Slicing and Suspense</a>, the second part involves components reading data from a cache:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">MovieDetails</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// What if it's still being fetched?</span>\n  <span class=\"token keyword\">const</span> movie <span class=\"token operator\">=</span> movieCache<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><em>(The talk uses a slightly different API but that‚Äôs not the point.)</em></p>\n<p>This builds on a React feature called ‚ÄúSuspense‚Äù, which is in active development for the data fetching use case. The interesting part, of course, is that the data might not yet be in the <code class=\"language-text\">movieCache</code> ‚Äî in which case we need to do <em>something</em> because we can‚Äôt proceed below. Technically, in that case the <code class=\"language-text\">read()</code> call throws a Promise (yes, <em>throws</em> a Promise ‚Äî let that sink in). This ‚Äúsuspends‚Äù the execution. React catches that Promise, and remembers to retry rendering the component tree after the thrown Promise resolves.</p>\n<p>This isn‚Äôt an algebraic effect per se, even though this trick was <a href=\"https://mobile.twitter.com/sebmarkbage/status/941214259505119232\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">inspired</a> by them. But it achieves the same goal: some code below in the call stack yields to something above in the call stack (React, in this case) without all the intermediate functions necessarily knowing about it or being ‚Äúpoisoned‚Äù by <code class=\"language-text\">async</code> or generators. Of course, we can‚Äôt really <em>resume</em> execution in JavaScript later, but from React‚Äôs point of view, re-rendering a component tree when the Promise resolves is pretty much the same thing. You can cheat when your programming model <a href=\"/react-as-a-ui-runtime/#purity\">assumes idempotence</a>!</p>\n<p><a href=\"https://reactjs.org/docs/hooks-intro.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Hooks</a> are another example that might remind you of algebraic effects. One of the first questions that people ask is: how can a <code class=\"language-text\">useState</code> call possibly know which component it refers to?</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">LikeButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// How does useState know which component it's in?</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isLiked<span class=\"token punctuation\">,</span> setIsLiked<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>I already explained the answer <a href=\"/how-does-setstate-know-what-to-do/\">near the end of this article</a>: there is a ‚Äúcurrent dispatcher‚Äù mutable state on the React object which points to the implementation you‚Äôre using right now (such as the one in <code class=\"language-text\">react-dom</code>). There is similarly a ‚Äúcurrent component‚Äù property that points to our <code class=\"language-text\">LikeButton</code>‚Äôs internal data structure. That‚Äôs how <code class=\"language-text\">useState</code> knows what to do.</p>\n<p>Before people get used to it, they often think it‚Äôs a bit ‚Äúdirty‚Äù for an obvious reason. It doesn‚Äôt ‚Äúfeel right‚Äù to rely on shared mutable state. <em>(Side note: how do you think <code class=\"language-text\">try / catch</code> is implemented in a JavaScript engine?)</em></p>\n<p>However, conceptually you can think of <code class=\"language-text\">useState()</code> as of being a <code class=\"language-text\">perform State()</code> effect which is handled by React when executing your component. That would ‚Äúexplain‚Äù why React (the thing calling your component) can provide state to it (it‚Äôs above in the call stack, so it can provide the effect handler). Indeed, <a href=\"https://github.com/ocamllabs/ocaml-effects-tutorial/#2-effectful-computations-in-a-pure-setting\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">implementing state</a> is one of the most common examples in the algebraic effect tutorials I‚Äôve encountered.</p>\n<p>Again, of course, that‚Äôs not how React <em>actually</em> works because we don‚Äôt have algebraic effects in JavaScript. Instead, there is a hidden field where we keep the current component, as well as a field that points to the current ‚Äúdispatcher‚Äù with the <code class=\"language-text\">useState</code> implementation. As a performance optimization, there are even separate <code class=\"language-text\">useState</code> implementations <a href=\"https://github.com/facebook/react/blob/2c4d61e1022ae383dd11fe237f6df8451e6f0310/packages/react-reconciler/src/ReactFiberHooks.js#L1260-L1290\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">for mounts and updates</a>. But if you squint at this code very hard, you might see them as essentially effect handlers.</p>\n<p>To sum up, in JavaScript, throwing can serve as a crude approximation for IO effects (as long as it‚Äôs safe to re-execute the code later, and as long as it‚Äôs not CPU-bound), and having a mutable ‚Äúdispatcher‚Äù field that‚Äôs restored in <code class=\"language-text\">try / finally</code> can serve as a crude approximation for synchronous effect handlers.</p>\n<p>You can also get a much higher fidelity effect implementation <a href=\"https://dev.to/yelouafi/algebraic-effects-in-javascript-part-4---implementing-algebraic-effects-and-handlers-2703\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">with generators</a> but that means you‚Äôll have to give up on the ‚Äútransparent‚Äù nature of JavaScript functions and you‚Äôll have to make everything a generator. Which is‚Ä¶ yeah.</p>\n<h3 id=\"learn-more\"><a href=\"#learn-more\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Learn More</h3>\n<p>Personally, I was surprised by how much algebraic effects made sense to me. I always struggled understanding abstract concepts like Monads, but Algebraic Effects just ‚Äúclicked‚Äù. I hope this article will help them ‚Äúclick‚Äù for you too.</p>\n<p>I don‚Äôt know if they‚Äôre ever going to reach mainstream adoption. I think I‚Äôll be disappointed if they don‚Äôt catch on in any mainstream language by 2025. Remind me to check back in five years!</p>\n<p>I‚Äôm sure there‚Äôs so much more you can do with them ‚Äî but it‚Äôs really difficult to get a sense of their power without actually writing code this way. If this post made you curious, here‚Äôs a few more resources you might want to check out:</p>\n<ul>\n<li><a href=\"https://github.com/ocamllabs/ocaml-effects-tutorial\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/ocamllabs/ocaml-effects-tutorial</a></li>\n<li><a href=\"https://www.janestreet.com/tech-talks/effective-programming/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.janestreet.com/tech-talks/effective-programming/</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=hrBq8R_kxI0\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.youtube.com/watch?v=hrBq8R_kxI0</a></li>\n</ul>\n<p>Many people also pointed out that if you omit the typing aspects (as I did in this article), you can find much earlier prior art for this in the <a href=\"https://en.wikibooks.org/wiki/Common_Lisp/Advanced_topics/Condition_System\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">condition system</a> in Common Lisp. You might also enjoy reading James Long‚Äôs <a href=\"https://jlongster.com/Whats-in-a-Continuation\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">post on continuations</a> that explains how the <code class=\"language-text\">call/cc</code> primitive can also serve as a foundation for building resumable exceptions in userland.</p>\n<p>If you find other useful resources on algebraic effects for people with JavaScript background, please let me know on Twitter!</p>","timeToRead":16,"frontmatter":{"title":"Algebraic Effects for the Rest of Us","date":"July 21, 2019","spoiler":"They‚Äôre not burritos.","cta":"react"},"fields":{"slug":"/algebraic-effects-for-the-rest-of-us/","langKey":"en"}}},"pageContext":{"slug":"/algebraic-effects-for-the-rest-of-us/","previous":{"fields":{"slug":"/preparing-for-tech-talk-part-3-content/","langKey":"en","directoryName":"preparing-for-tech-talk-part-3-content","maybeAbsoluteLinks":["/preparing-for-tech-talk-part-1-motivation/","/preparing-for-tech-talk-part-2-what-why-and-how/"]},"frontmatter":{"title":"Preparing for a Tech Talk, Part¬†3: Content"}},"next":{"fields":{"slug":"/how-does-the-development-mode-work/","langKey":"en","directoryName":"how-does-the-development-mode-work","maybeAbsoluteLinks":[]},"frontmatter":{"title":"How Does the Development Mode Work?"}},"translations":["ja","ko","zh-hans"],"translatedLinks":[]}}}