{"componentChunkName":"component---src-templates-blog-post-js","path":"/zh-hans/goodbye-clean-code/","result":{"data":{"site":{"siteMetadata":{"title":"Overreacted","author":"Dan Abramov"}},"markdownRemark":{"id":"fe17e9b3-527f-57d4-996c-84de37330667","html":"<p>那是一个深夜。</p>\n<p>我的同事们刚刚提交了过去整整一周所写的代码。我们正在开发一个基于 Canvas 的图形编辑器，他们负责实现各种“形状”（比如：矩形、椭圆形）的缩放功能，缩放行为由拖拽“形状”边缘上的操作柄来实现。</p>\n<p>代码运行正常。</p>\n<p>但是代码有些重复。每个“形状”（如：矩形、椭圆形）各自拥有若干操作柄，从不同方向拖拽操作柄都会对“形状”的位置和尺寸产生相应的影响。如果用户按住“Shift”键，我们还需要保持住“形状”的宽高比不变。这里涉及到一些数学计算。</p>\n<p>代码看起来是这样的：</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">let</span> Rectangle <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">resizeTopLeft</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">position<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">,</span> preserveAspect<span class=\"token punctuation\">,</span> dx<span class=\"token punctuation\">,</span> dy</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 10 repetitive lines of math</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">resizeTopRight</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">position<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">,</span> preserveAspect<span class=\"token punctuation\">,</span> dx<span class=\"token punctuation\">,</span> dy</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 10 repetitive lines of math</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">resizeBottomLeft</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">position<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">,</span> preserveAspect<span class=\"token punctuation\">,</span> dx<span class=\"token punctuation\">,</span> dy</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 10 repetitive lines of math</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">resizeBottomRight</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">position<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">,</span> preserveAspect<span class=\"token punctuation\">,</span> dx<span class=\"token punctuation\">,</span> dy</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 10 repetitive lines of math</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> Oval <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">resizeLeft</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">position<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">,</span> preserveAspect<span class=\"token punctuation\">,</span> dx<span class=\"token punctuation\">,</span> dy</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 10 repetitive lines of math</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">resizeRight</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">position<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">,</span> preserveAspect<span class=\"token punctuation\">,</span> dx<span class=\"token punctuation\">,</span> dy</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 10 repetitive lines of math</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">resizeTop</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">position<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">,</span> preserveAspect<span class=\"token punctuation\">,</span> dx<span class=\"token punctuation\">,</span> dy</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 10 repetitive lines of math</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">resizeBottom</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">position<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">,</span> preserveAspect<span class=\"token punctuation\">,</span> dx<span class=\"token punctuation\">,</span> dy</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 10 repetitive lines of math</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> Header <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">resizeLeft</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">position<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">,</span> preserveAspect<span class=\"token punctuation\">,</span> dx<span class=\"token punctuation\">,</span> dy</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 10 repetitive lines of math</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">resizeRight</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">position<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">,</span> preserveAspect<span class=\"token punctuation\">,</span> dx<span class=\"token punctuation\">,</span> dy</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 10 repetitive lines of math</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>  \n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> TextBlock <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">resizeTopLeft</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">position<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">,</span> preserveAspect<span class=\"token punctuation\">,</span> dx<span class=\"token punctuation\">,</span> dy</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 10 repetitive lines of math</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">resizeTopRight</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">position<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">,</span> preserveAspect<span class=\"token punctuation\">,</span> dx<span class=\"token punctuation\">,</span> dy</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 10 repetitive lines of math</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">resizeBottomLeft</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">position<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">,</span> preserveAspect<span class=\"token punctuation\">,</span> dx<span class=\"token punctuation\">,</span> dy</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 10 repetitive lines of math</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">resizeBottomRight</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">position<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">,</span> preserveAspect<span class=\"token punctuation\">,</span> dx<span class=\"token punctuation\">,</span> dy</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 10 repetitive lines of math</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>这种重复的数学计算逻辑，对我来说，真的难受。</p>\n<p>这不是“整洁”的代码。</p>\n<p>多数的重复都在于“方向”上的相似，举个例子，<code class=\"language-text\">Oval.resizeLeft()</code> 和 <code class=\"language-text\">Header.resizeLeft()</code> 就很类似。这是因为，它们都是在处理拖拽左侧操作柄的问题。</p>\n<p>另一个原因在于“形状”所拥有的方法上的相似，例如，<code class=\"language-text\">Oval.resizeLeft()</code> 和 <code class=\"language-text\">Oval</code> 上的其它方法是类似的。这是因为，它们都是在处理“椭圆形”上的问题。更进一步，<code class=\"language-text\">Rectangle</code>, <code class=\"language-text\">Header</code> 以及 <code class=\"language-text\">TextBlock</code> 都有相似的地方，因为文本框都是“矩形”。</p>\n<p>我有个办法。</p>\n<p>我们可以通过对代码逻辑进行分组，来实现“去除全部重复”的目的：</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">let</span> Directions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">top</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 5 unique lines of math</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">left</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 5 unique lines of math</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">bottom</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 5 unique lines of math</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">right</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 5 unique lines of math</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> Shapes <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">Oval</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 5 unique lines of math</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">Rectangle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 5 unique lines of math</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>然后，像这样来组合它们：</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">let</span> <span class=\"token punctuation\">{</span>top<span class=\"token punctuation\">,</span> bottom<span class=\"token punctuation\">,</span> left<span class=\"token punctuation\">,</span> right<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> Directions<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">createHandle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">directions</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 20 lines of code</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> fourCorners <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token function\">createHandle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>top<span class=\"token punctuation\">,</span> left<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">createHandle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>top<span class=\"token punctuation\">,</span> right<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">createHandle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>bottom<span class=\"token punctuation\">,</span> left<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">createHandle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>bottom<span class=\"token punctuation\">,</span> right<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> fourSides <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token function\">createHandle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>top<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">createHandle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>left<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">createHandle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>right<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">createHandle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>bottom<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> twoSides <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token function\">createHandle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>left<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">createHandle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>right<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">createBox</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">shape<span class=\"token punctuation\">,</span> handles</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 20 lines of code</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> Rectangle <span class=\"token operator\">=</span> <span class=\"token function\">createBox</span><span class=\"token punctuation\">(</span>Shapes<span class=\"token punctuation\">.</span>Rectangle<span class=\"token punctuation\">,</span> fourCorners<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> Oval <span class=\"token operator\">=</span> <span class=\"token function\">createBox</span><span class=\"token punctuation\">(</span>Shapes<span class=\"token punctuation\">.</span>Oval<span class=\"token punctuation\">,</span> fourSides<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> Header <span class=\"token operator\">=</span> <span class=\"token function\">createBox</span><span class=\"token punctuation\">(</span>Shapes<span class=\"token punctuation\">.</span>Rectangle<span class=\"token punctuation\">,</span> twoSides<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> TextBox <span class=\"token operator\">=</span> <span class=\"token function\">createBox</span><span class=\"token punctuation\">(</span>Shapes<span class=\"token punctuation\">.</span>Rectangle<span class=\"token punctuation\">,</span> fourCorners<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>代码量减少到 1 / 2，并且，重复代码不复存在！这真是“整洁”啊。如果我们希望改变具体某个“方向”上的或“形状”上的行为，只需要修改一处，而非多处。</p>\n<p>已经很晚了（我很疲惫了），我提交我重构后的代码，然后就躺下了，并对自己“帮助同事整洁代码”而感到心满意足。</p>\n<h3 id=\"第二天上午\"><a href=\"#%E7%AC%AC%E4%BA%8C%E5%A4%A9%E4%B8%8A%E5%8D%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>第二天上午</h3>\n<p>… 事情并非我想的那样。</p>\n<p>我的上级单独找到了我，委婉地要求我撤销昨天的那些修改。我感到很不可思议，旧代码那么差劲，而我的是多么“整洁”啊！</p>\n<p>我那时只好谨遵照守；但是后来，历经数年，我才明白他们的要求是对的。</p>\n<h3 id=\"那是一个职业阶段\"><a href=\"#%E9%82%A3%E6%98%AF%E4%B8%80%E4%B8%AA%E8%81%8C%E4%B8%9A%E9%98%B6%E6%AE%B5\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>那是一个职业阶段</h3>\n<p>对“整洁代码”的沉迷、好于“消除重复代码”，是我们大多数开发者都会经历的阶段。当我们对自己的代码没有信心，自我价值感和专业荣誉感往往会使我们与一些可测量的东西靠拢，一组严格的 lint 规则、一套命名规范、一种文件结构、无重复性指标，等等。</p>\n<p>你不可能让“重复代码”自动被消除，但是<em>确实</em>可以借助“实践经验”使它更可行。你往往可以看到，每次修改后的代码量是变得更多或更少。结果就是，消除重复代码看起来提高了代码的某些客观的可测量指标。然而，糟糕的是，这扰乱了人们的自我认知，他们会对自己说：<em>“我是那种会写出整洁代码的人”</em>，而这其实跟其它的自我欺骗行为没什么两样。</p>\n<p>一旦学会了如何<a href=\"https://www.sandimetz.com/blog/2016/1/20/the-wrong-abstraction\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">“抽象”</a>，我们似乎就会更进一步，每次看到重复的代码，我们甚至能够从“无”中发现可“抽象”的东西。编码数年以后，我们已经厉害得随处都能看到重复的代码，我们同时获得了一项新的超能力：抽象。进而，如果有人告诉我们“抽象是好的”，我们便对此更加笃信。于是我们开始去批判那些不崇尚”整洁代码”的人。</p>\n<p>我现在明白，我的那次“重构行为”确实是一场灾难（译者：夸张了吧～），从两个方面来说：</p>\n<ul>\n<li>首先，我没有告诉代码的作者。我在没有他们参入的情况下，重写并提交了代码。即便，那确是一次对代码的“改善”（我现在不以为然了），它也十分可怕。一个健康的工程团队需要不断地“建立彼此的信任”。不经讨论而擅自重写同事的代码，是对高效协作能力的彻底否定。</li>\n<li>其次，一切都需要权衡。为了减少重复，我的代码难于应付需求变更，而这并不值得。例如，我们后边需要为不同“形状”上的各个操作柄添加特殊的行为逻辑。为了应付这些，我的“抽象”无疑使修改困难了数倍，反观那原本“肮脏的”代码，它则能够轻松处理。</li>\n</ul>\n<p>我的意思是你应该写“脏”的代码吗？不，我建议你深入思考一下“整洁”与“肮脏”分别意指何物。你有对于批判、正确、美和优雅的直觉吗？你如何能确定地说你的这次工程成果达到了那些质量指标？它们如何确切地影响到代码的产生与<a href=\"/zh-hans/optimized-for-change/\">维护</a>？</p>\n<p>我当时确然对于这些问题没有进行过深入思考；我当时考虑的是代码“看起来”如何，而不是代码该如何随着不断流动的团队而演进。</p>\n<p>写代码是一场旅行。回想一下，你编写第一行代码时的情形，到现在你所处的状态。我相信，当突然发现“抽取出一个函数”或“重构一个类的定义”是如何使问题由复杂变得简单的时候，你必定是开心的。一旦对自己的作品产生了自豪感，你就会热切地去追求代码的整洁。对此，你可以保持一段时间。</p>\n<p>但是不要止乎此，不要成为一个整洁代码的狂热分子。整洁代码并不是目的，它只是让我们从所面对系统的异常复杂性中解脱出来的方法。在你不是很明确一个改动会如何影响到整个代码库时，这信念可以作为一种安全防护机制。但是在未知的海洋里，你需要一个指南针。</p>\n<p>那就让整洁代码指引你吧，<strong>然后忘了它</strong>。</p>","timeToRead":6,"frontmatter":{"title":"再见，整洁代码","date":"January 11, 2020","spoiler":"让整洁代码指引你吧，然后忘了它","cta":null},"fields":{"slug":"/zh-hans/goodbye-clean-code/","langKey":"zh-hans"}}},"pageContext":{"slug":"/zh-hans/goodbye-clean-code/","translations":["es","ko","pt-br","zh-hans"],"translatedLinks":[]}}}